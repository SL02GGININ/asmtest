<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>零食天堂 - 優質零食網購平台</title>
    
    <!-- React & React DOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Animation classes */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        /* Loading spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #5D5CDE;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Product card hover effect */
        .product-card {
            transition: all 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        /* Button animations */
        .btn-primary {
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
        }
        
        .btn-primary:active {
            transform: scale(0.95);
        }
        
        /* Badge pulse animation */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .badge-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            ::-webkit-scrollbar-track {
                background: #1a1a1a;
            }
        }
        
        /* Responsive image */
        img {
            max-width: 100%;
            height: auto;
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
            animation: slideIn 0.3s ease-out;
        }
        
        /* Modal overlay */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        /* Chatbot styles */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .chatbot-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #5D5CDE, #8A88FF);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(93, 92, 222, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .chatbot-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(93, 92, 222, 0.6);
        }
        
        .chatbot-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .chatbot-header {
            background: linear-gradient(135deg, #5D5CDE, #8A88FF);
            color: white;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chatbot-messages {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
        }
        
        .bot-message {
            background: #f1f3f5;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }
        
        .user-message {
            background: #5D5CDE;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }
        
        .chatbot-input {
            display: flex;
            padding: 16px;
            border-top: 1px solid #e9ecef;
            gap: 8px;
        }
        
        .chatbot-input input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #e9ecef;
            border-radius: 24px;
            outline: none;
        }
        
        .chatbot-input input:focus {
            border-color: #5D5CDE;
        }
        
        .chatbot-input button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #5D5CDE;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .chatbot-typing {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 16px;
            background: #f1f3f5;
            border-radius: 18px;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: #868e96;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        .quick-reply {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        
        .quick-reply-button {
            background: white;
            border: 1px solid #5D5CDE;
            color: #5D5CDE;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quick-reply-button:hover {
            background: #5D5CDE;
            color: white;
        }
        
        /* 封面 */
        .somethink_like_that-section {
            background: linear-gradient(to bottom, #5D5CDE, #44cece, #DAB5CE);
            padding: 80px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .somethink_like_that-content {
            position: relative;
            z-index: 2;
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
        }
        
        .somethink_like_that-content h1 {
            font-size: 60px;
            margin-bottom: 10px;
            color: #333333;
        }
        
        .somethink_like_that-content h2 {
            font-size: 48px;
            margin-bottom: 20px;
            color: #1f73e0;
        }
        
        .somethink_like_that-content p {
            font-size: 18px;
            margin: 0 0 30px 0;
            font-weight: bold;
        }
        
        .somethink_like_that-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 50px;
        }
        
        .somethink_like_that-stats {
            display: flex;
            justify-content: center;
            gap: 50px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #1f73e0;
            display: block;
        }
        
        .stat-text {
            font-size: 16px;
            color: #333333;
            font-weight: bold;
        }
        
        /* 精選商品 */
        .featured-products-section {
            background: #FFFFFF;
            padding: 80px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .section-title h2 {
            font-size: 36px;
            margin-bottom: 15px;
            color: #333333;
        }
        
        .section-title p {
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
            color: #333333;
        }
        
        .product-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            gap: 20px;
        }
        
        .tab-btn {
            padding: 12px 30px;
            background-color: #ECE5E0;
            color: #333333;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            background-color: #5D5CDE;
            color: white;
        }
        
        .view-more {
            text-align: center;
        }
        
        /* 優惠活動 */
        .promotions-section {
            background: #FFFFFF;
            padding: 80px 0;
        }
        
        .promotion-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .promotion-card {
            background-color: #FFFFFF;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
        }
        
        .promotion-img {
            width: 50%;
            background-color: #C1E2F7;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: #DAB5CE;
            transition: transform 0.3s;
        }
        
        .promotion-card:hover .promotion-img {
            transform: scale(1.05);
        }
        
        .promotion-content {
            width: 50%;
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .promotion-title {
            font-size: 24px;
            margin-bottom: 15px;
            color: #333333;
        }
        
        .promotion-desc {
            margin-bottom: 20px;
            color: #666;
        }
        
        .anniversary-card {
            background-color: #DAB5CE;
            color: white;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .anniversary-title {
            font-size: 28px;
            margin-bottom: 15px;
        }
        
        .anniversary-desc {
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .anniversary-time {
            font-size: 16px;
            margin-top: 15px;
        }
        
        /* 客户評價 */
        .testimonials-section {
            background: #FFFFFF;
            padding: 80px 0;
        }
        
        .testimonial-slider {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
            overflow: hidden;
        }
        
        .testimonial-track {
            display: flex;
            transition: transform 0.5s ease;
        }
        
        .testimonial-slide {
            min-width: 100%;
            padding: 0 20px;
        }
        
        .testimonial-card {
            background-color: #FFFFFF;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #ECE5E0;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: #DAB5CE;
        }
        
        .user-name {
            font-size: 20px;
            margin-bottom: 10px;
        }
        
        .user-rating {
            color: #FFD700;
            margin-bottom: 15px;
        }
        
        .testimonial-text {
            font-style: italic;
            color: #666;
        }
        
        .slider-nav {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            gap: 10px;
        }
        
        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #ECE5E0;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .slider-dot.active {
            background-color: #5D5CDE;
        }
        
        .slider-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: #5D5CDE;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 10;
        }
        
        .slider-arrow:hover {
            background-color: #8A88FF;
        }
        
        .slider-arrow.left {
            left: 10px;
        }
        
        .slider-arrow.right {
            right: 10px;
        }
        
        .testimonial-stats {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin-top: 50px;
        }
        
        .testimonial-stat {
            text-align: center;
        }
        
        .testimonial-number {
            font-size: 36px;
            font-weight: bold;
            color: #5D5CDE;
            display: block;
            font-weight: bold;
        }
        
        .testimonial-label {
            font-size: 16px;
            color: #333333;
            font-weight: bold;
        }
        
        /* 椭圆形按钮样式 */
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: #5D5CDE;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
        }
        
        .btn:hover {
            background-color: #8A88FF;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-pink {
            background-color: #DAB5CE;
        }
        
        .btn-pink:hover {
            background-color: #d89bb9;
        }
        
        /* 合作夥伴公司輪播區域樣式 */
        .partners-section {
            background: #ffffff;
            padding: 80px 0;
        }
        
        /* 輪播樣式 */
        .partners-slider-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgb(255, 255, 255);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(53, 50, 214, 0.1);
            position: relative;
        }
        
        .partners-slider {
            width: 100%;
            height: var(--height);
            overflow: hidden;
            mask-image: linear-gradient(to right, transparent, #000 5% 95%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, #000 5% 95%, transparent);
            padding: 20px 0;
        }
        
        .partners-list {
            display: flex;
            width: 100%;
            min-width: calc(var(--width) * var(--quantity));
            position: relative;
        }
        
        .partner-item {
            width: var(--width);
            height: var(--height);
            position: absolute;
            left: 100%;
            animation: autoRun var(--duration) linear infinite;
            animation-delay: calc(
                (var(--duration) / var(--quantity)) * (var(--position) - 1) -
                var(--duration)
            );
            list-style-type: none;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background: white;
            cursor: pointer;
        }
        
        .partner-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .partner-item-content {
            display: flex;
            flex-direction: column;
            height: 100%;
            outline: none;
        }
        
        .partner-item img {
            width: 100%;
            height: 70%;
            object-fit: contain;
            padding: 10px;
            background-color: #f9f9f9;
        }
        
        .partner-item .brand-name {
            height: 30%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            color: #333;
            background: #f9f9f9;
            border-top: 1px solid #eee;
        }
        
        .partners-slider:hover .partner-item,
        .partners-slider:focus .partner-item {
            animation-play-state: paused;
        }
        
        @keyframes autoRun {
            from {
                left: 100%;
            }
            to {
                left: calc(var(--width) * -1);
            }
        }
        
        @media (prefers-reduced-motion) {
            .partners-slider .partner-item {
                animation-play-state: paused;
            }
        }
        
        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 36px;
            }
            
            .hero-content h2 {
                font-size: 28px;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .hero-stats {
                flex-direction: column;
                gap: 30px;
            }
            
            .promotion-grid {
                grid-template-columns: 1fr;
            }
            
            .promotion-card {
                flex-direction: column;
            }
            
            .promotion-img, .promotion-content {
                width: 100%;
            }
            
            .testimonial-stats {
                flex-direction: column;
                gap: 30px;
            }
            
            .partners-slider {
                --width: 120px;
                --height: 140px;
            }
            
            .partner-item .brand-name {
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 576px) {
            .hero-content h1 {
                font-size: 32px;
            }
            
            .hero-content h2 {
                font-size: 24px;
            }
            
            .section-title h2 {
                font-size: 28px;
            }
            
            .product-tabs {
                flex-direction: column;
                align-items: center;
            }
        }

/* 香港零食回憶時光區域樣式 - 修改部分 */
        .wrapper {
          --color: #1f242d;
          --color-invert: #ffffff;
          --clip-path: circle(15px at left);
          --clip-path-hover: circle(70px at left);
          --clip-path-clicked: circle(100vw at left);
          --duration: 0.4s;
          --timing-function: ease;
          position: relative;
          display: flex;
          justify-content: center;
          align-items: center;
          width: 100%;
          height: 100vh;
        }
        .wrapper .video {
          height: 100vh;
          overflow: hidden;
          display: flex;
          justify-content: center;
          align-items: center;
          margin-left: 15px;
          clip-path: var(--clip-path);
          transition: clip-path var(--duration) var(--timing-function);
        }
        .wrapper .video video {
          position: fixed;
          background: #c4cbde;
          top: 50%;
          left: 50%;
          min-width: 100%;
          min-height: 100%;
          width: auto;
          height: auto;
          transform: translate(-50%, -50%);
          /* 確保影片在背景中播放 */
          z-index: -1;
        }
        .wrapper .text {
          position: relative;
          text-transform: uppercase;
          font-weight: 600;
          letter-spacing: 0.2px;
          opacity: var(--opacity, 1);
          transition: opacity 0.3s var(--timing-function) 0.2s;
        }
        .wrapper .text::before, .wrapper .text::after {
          content: "";
          position: absolute;
          bottom: 0;
          left: -1px;
          right: 25px;
          height: 0;
        }
        .wrapper .text::before {
          box-shadow: 26px 0 0 1px var(--color);
          right: var(--r, 100%);
          opacity: var(--opacity, 0);
          transition: right 0.5s ease-in, opacity 0.1s linear;
        }
        .wrapper .text::after {
          box-shadow: 26px 0 0 1px var(--color-invert);
          clip-path: var(--clip-path);
          transition: clip-path var(--duration) var(--timing-function);
        }
        .wrapper .text > span::before, .wrapper .text > span::after {
          content: attr(data-text);
          padding-left: 26px;
        }
        .wrapper .text > span::before {
          color: var(--color);
        }
        .wrapper .text > span::after {
          color: var(--color-invert);
          clip-path: var(--clip-path);
          transition: clip-path var(--duration) var(--timing-function);
          position: absolute;
          left: 0;
        }
        .wrapper input {
          width: 220px;
          height: 40px;
          margin: auto;
          position: absolute;
          left: 0;
          right: 0;
          border-radius: 40px;
          outline: none;
          z-index: 2;
          appearance: none;
          cursor: pointer;
        }
        .wrapper input:focus {
          outline: 0;
        }
        .wrapper input:hover ~ .video {
          clip-path: var(--clip-path-hover);
        }
        .wrapper input:hover ~ .text::before {
          --r: 25px;
          --opacity: 1;
        }
        .wrapper input:hover ~ .text::after {
          clip-path: var(--clip-path-hover);
        }
        .wrapper input:hover ~ .text > span::after {
          clip-path: var(--clip-path-hover);
        }
        .wrapper input:checked {
          width: 100%;
          height: 100%;
          border-radius: 0;
        }
        .wrapper input:checked ~ .video {
          clip-path: var(--clip-path-clicked);
        }
        .wrapper input:checked ~ .text {
          --opacity: 0;
          transition: opacity 0.3s var(--timing-function);
        }
        .wrapper input:checked ~ .text::after {
          clip-path: var(--clip-path-clicked);
        }
        .wrapper input:checked ~ .text > span::after {
          clip-path: var(--clip-path-clicked);
        }

        /* 香港零食回憶時光區域頁面樣式 */
        .hk-memories-page {
          background: #e8ebf3;
          min-height: 100vh;
          font: 400 16px "Poppins", sans-serif;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          position: relative;
        }
        
        .hk-memories-page .socials {
          position: fixed;
          display: block;
          left: 20px;
          bottom: 20px;
          z-index: 9999;
        }
        .hk-memories-page .socials > a {
          display: block;
          width: 30px;
          opacity: 0.2;
          transform: scale(var(--scale, 0.8));
          transition: transform 0.3s cubic-bezier(0.38, -0.12, 0.24, 1.91);
        }
        .hk-memories-page .socials > a:hover {
          --scale: 1;
        }
        
        .back-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          z-index: 9999;
          background-color: #5D5CDE;
          color: white;
          border: none;
          border-radius: 50px;
          padding: 12px 24px;
          cursor: pointer;
          font-size: 16px;
          font-weight: bold;
          transition: all 0.3s ease;
        }
        
        .back-button:hover {
          background-color: #8A88FF;
          transform: translateY(-3px);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .hk-memories-page-title {
          position: absolute;
          top: 40px;
          left: 0;
          right: 0;
          text-align: center;
          font-size: 36px;
          font-weight: bold;
          color: #333;
          z-index: 10;
        }
        
        /* 新增：影片控制按鈕樣式 */
        .video-controls {
          position: absolute;
          bottom: 80px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 100;
          display: flex;
          gap: 10px;
        }
        
        .video-control-btn {
          background-color: rgba(93, 92, 222, 0.8);
          color: white;
          border: none;
          border-radius: 50px;
          padding: 8px 16px;
          cursor: pointer;
          font-size: 14px;
          transition: all 0.3s ease;
        }
        
        .video-control-btn:hover {
          background-color: rgba(93, 92, 222, 1);
        }
        
        /* 新增：影片加載狀態指示器 */
        .video-loading {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          color: #5D5CDE;
          font-size: 18px;
          z-index: 10;
        }
        
        /* 關於我們頁面中的按鈕樣式 */
        .hk-memories-button {
          margin-top: 30px;
          padding: 12px 24px;
          background-color: #5D5CDE;
          color: white;
          border: none;
          border-radius: 50px;
          cursor: pointer;
          font-size: 16px;
          font-weight: bold;
          transition: all 0.3s ease;
          text-align: center;
          display: inline-block;
        }
        
        .hk-memories-button:hover {
          background-color: #8A88FF;
          transform: translateY(-3px);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#FF6B6B',
                        accent: '#4ECDC4',
                        warning: '#FFE66D',
                        dark: '#2C3E50'
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif']
                    }
                }
            },
            darkMode: 'class'
        }
    </script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, createContext, useContext, useMemo, useRef } = React;
        
        // ==================== Data Service (模擬資料庫) ====================
        const DataService = {
            // 模擬 API 延遲
            delay: (ms = 500) => new Promise(resolve => setTimeout(resolve, ms)),
            
            // 產品數據
            products: [
                // 餅乾類
                { id: 101, name: 'Ritz 利士檸檬餅(9包裝)', category: 'cookies', price: 21, image: './Image(biscuits)/利士檸檬餅.webp', description: '鬆脆、香濃、獨特的口感,讓我們的精神在享受美味的同時得以放鬆。', stock: 50, rating: 4.5, sales: 1200 },
                { id: 102, name: 'ITO 伊滕 雲尼拿夾心餅 (132g)', category: 'cookies', price: 18, image: './Image(biscuits)/伊滕雲尼拿夾心餅.webp', description: '提升濃度的雲呢拿Cream味道，夾在兩片鬆脆的曲奇餅乾之內。', stock: 35, rating: 4.8, sales: 980 },
                { id: 103, name: '小牧味屋 高鈣芥末蘇打餅 (270g)', category: 'cookies', price: 15, image: './Image(biscuits)/高鈣芥末蘇打餅.webp', description: '餅乾帶有獨特的芥末味，口感香脆。', stock: 42, rating: 4.6, sales: 756 },
                { id: 104, name: '萊家雙重朱古力威化餅 (250g)', category: 'cookies', price: 19, image: './Image(biscuits)/萊家雙重朱古力威化餅.webp', description: '由頂級可可特製的鬆脆威化片與香滑巧克力奶油組合，層疊口感帶來雙倍的美味享受!', stock: 28, rating: 4.7, sales: 634 },
                { id: 105, name: 'KitKat 朱古力威化 (150.8g)', category: 'cookies', price: 24, image:'./Image(chocolate)/KitKat 朱古力威化.avif', description: '「Have a break, have a KitKat」——享受片刻輕鬆的最佳選擇。', stock: 52, rating: 4.6, sales: 980 },
                { id: 106, name: '奧利奧原味夾心餅 (110.4g)', category: 'cookies', price: 12, image: './Image(biscuits)/奧利奧原味夾心餅.avif', description: '黑白經典，一口酥脆，一口甜蜜，咬下就是童年的味道。', stock: 65, rating: 4.7, sales: 2100 },
                { id: 107, name: '樂天小熊餅巧克力味家庭裝 (195g)', category: 'cookies', price: 8, image: './Image(biscuits)/樂天小熊餅巧克力味家庭裝.avif', description: '可愛小熊造型，外層酥脆，內餡甜美，每一顆小熊，都是快樂的巧克力驚喜。', stock: 80, rating: 4.5, sales: 1850 },
                { id: 108, name: '麥維他消化餅獨立包裝 (176g)', category: 'cookies', price: 15, image: './Image(biscuits)/麥維他消化餅獨立包裝.png', description: '小巧方便，低調樸實，健康與美味兼備，是經典不敗的零食選擇。', stock: 45, rating: 4.3, sales: 1200 },
                { id: 109, name: '太平梳打餅香葱味 (400g)', category: 'cookies', price: 18, image: './Image(biscuits)/太平梳打餅香葱味.jpg', description: '簡單樸實，香葱點綴，一片入口，是熟悉的家常零食。', stock: 55, rating: 4.4, sales: 1350 },
                { id: 110, name: '丹麥藍罐牛油曲奇 (125g)', category: 'cookies', price: 68, image: './Image(biscuits)/丹麥藍罐牛油曲奇.avif', description: '經典藍罐，香濃牛油香氣，多款造型，咖啡或奶茶的最佳拍檔。', stock: 30, rating: 4.8, sales: 980 },
                { id: 111, name: '香港GARDEN嘉頓 威化餅乾 夾心薄脆餅 巧克力口味 (200g)', category: 'cookies', price: 16, image: './Image(biscuits)/香港GARDEN嘉頓 威化餅乾 夾心薄脆餅 巧克力口味.png', description: '香港經典品牌，香濃可可夾心，輕盈酥脆，陪伴世代的熟悉味道。', stock: 40, rating: 4.2, sales: 1100 },
                // 薯片類
                { id: 201, name: '原味薯片', category: 'chips', price: 15, image: './Image(chips)/原味薯片.jpg', description: '經典原味，酥脆可口', stock: 100, rating: 4.4, sales: 2100 },
                { id: 202, name: '海苔薯片', category: 'chips', price: 18, image: './Image(chips)/海苔薯片.jpg', description: '海苔香氣撲鼻', stock: 85, rating: 4.6, sales: 1890 },
                { id: 203, name: '烤肉薯片', category: 'chips', price: 27, image: './Image(chips)/烤肉薯片.jpg', description: '炭烤風味十足', stock: 92, rating: 4.5, sales: 1650 },
                { id: 204, name: '芝士薯片', category: 'chips', price: 18, image: './Image(chips)/芝士薯片.jpg', description: '濃郁起司味', stock: 78, rating: 4.7, sales: 1420 },
                { id: 205, name: '卡樂B BBQ味薯片', category: 'chips', price: 16, image:'./Image(chips)/卡樂B BBQ味薯片.jpg', description: '卡樂B最經典的產品，香港人最愛的燒烤風味', stock: 52, rating: 4.6, sales: 120 },
                { id: 206, name: '卡樂B薄餅味薯片', category: 'chips', price: 18, image: './Image(chips)/卡樂B薄餅味薯片.jpg', description: '以真正芝士配合日本卡樂B獨特碎溶技術，生產出特厚的V-Cut薯片，像吃真正薄餅一樣', stock: 88, rating: 4.7, sales: 140 },
                { id: 207, name: '巨浪大切番茄味薯片', category: 'chips', price: 18, image: './Image(chips)/巨浪大切蕃茄味薯片.jpg', description: '蕃茄味薯片，香脆可口', stock: 68, rating: 4.8, sales: 142 },
                { id: 208, name: '樂事黑松露味薯片', category: 'chips', price: 18, image: './Image(chips)/樂事黑松露味薯片.jpg', description: '香濃黑松露粉加上微鹹滋味 充分帶出黑松露獨有味道加上薯片薄身 勁脆勁香口哩個厚度 啱啱好突出黑松露香味!', stock: 97, rating: 4.9, sales: 120 },
                { id: 209, name: '熱浪薯片', category: 'chips', price: 18, image: './Image(chips)/熱浪薯片.jpg', description: '每片薯片都充滿熱浪香辣的風味，讓你一試上癮', stock: 97, rating: 4.9, sales: 120 },

                // 糖果類
                { id: 301, name: '春日井水果軟糖 (102g)', category: 'candy', price: 20, image: './Image(candy)/Z_02_春日井水果軟糖.jpg', description: '多種水果口味', stock: 120, rating: 4.3, sales: 2500 },
                { id: 302, name: '北海道特濃牛奶糖 (120g)', category: 'candy', price: 20, image: './Image(candy)/Z_01_北海道特濃牛奶糖.jpeg', description: '香濃牛奶風味', stock: 95, rating: 4.4, sales: 1980 },
                { id: 303, name: '洛基山 什錦味棉花糖 (300g)', category: 'candy', price: 27, image: './Image(candy)/洛基山什錦味棉花糖.avif', description: '綿密鬆軟', stock: 68, rating: 4.2, sales: 1230 },
                { id: 304, name: 'HARIBO 快樂可樂熊軟糖 (200g)', category: 'candy', price: 18.5, image: './Image(candy)/Z_03_快樂可樂熊軟糖.jpg', description: 'Q彈有嚼勁', stock: 110, rating: 4.5, sales: 1850 },
                { id: 305, name: 'Honey 檸檬蜜茶糖 (100g)', category: 'candy', price: 18.5, image: './Image(candy)/Z_04_Honey 檸茶糖_ 獨立包裝.jpg', description: '味道帶有蜜糖甜味和檸檬酸味，經典的味道', stock: 110, rating: 4.5, sales: 1850 },
                { id: 306, name: '彩虹糖原味袋裝 (150G)', category: 'candy', price: 25, image: './Image(candy)/彩虹糖原味袋裝.avif', description: '小巧糖粒，五彩繽紛，舌尖上的小驚喜，每一顆都是不同味道的冒險。', stock: 75, rating: 4.6, sales: 1650 },
                { id: 307, name: 'Puccho棒糖可樂味 (50g)', category: 'candy', price: 10, image: './Image(candy)/Puccho棒糖可樂味.avif', description: '小巧方便，酸甜交織，Puccho 的創意口感，像打開冰涼汽水般的驚喜。', stock: 120, rating: 4.3, sales: 2200 },
                { id: 308, name: '大白兔奶糖 (227g)', category: 'candy', price: 22, image: './Image(candy)/大白兔奶糖.webp', description: '經典白兔包裝，香濃牛奶味，甜而不膩，中外皆知的經典零食，跨越時代的美好。', stock: 65, rating: 4.7, sales: 1800 },
                { id: 309, name: 'Orion 我的葡萄味軟糖 (66g)', category: 'candy', price: 8, image: './Image(candy)/Orion 我的葡萄味軟糖.jpg', description: 'Orion 經典零食，Q彈口感，紫色果香，每一顆都是甜美驚喜，讓舌尖感受滿滿果園風情。', stock: 90, rating: 4.4, sales: 1950 },
                { id: 310, name: '迷你棒棒糖袋裝 (90g)', category: 'candy', price: 15, image: './Image(candy)/迷你棒棒糖袋裝.avif', description: '多種口味，輕鬆分享，繽紛色彩滿滿驚喜，大小朋友都愛不釋手。', stock: 110, rating: 4.5, sales: 1750 },
                { id: 311, name: '瑞士糖雜果味 (175g)', category: 'candy', price: 18, image: './Image(candy)/瑞士糖雜果味.jpg', description: '瑞士經典糖果，五彩繽紛，多種口味，舌尖上的快樂冒險。', stock: 85, rating: 4.3, sales: 1600 },
                { id: 312, name: 'Lotte_Zero奇異果桃軟糖 (238g)', category: 'candy', price: 18.5, image: './Image(candy)/Lotte_Zero奇異果桃軟糖.avif', description: 'Lotte Zero 的創新口感，酸甜果香在舌尖綻放，奇異果的清爽與桃子的香甜交織。', stock: 110, rating: 4.5, sales: 1850 },
                
                // 朱古力類
                { id: 401, name: 'Apriori 99% 黑朱古力 (100g)', category: 'chocolate', price: 28, image:'./Image(chocolate)/Apriori黑朱古力.jpg', description: '帶有濃郁純粹的可可香氣，高可可含量的黑朱古力富含抗氧化物。', stock: 45, rating: 4.8, sales: 890 },
                { id: 402, name: '義美絲絨牛奶巧克力 (88g)', category: 'chocolate', price: 18, image: './Image(chocolate)/義美絲絨牛奶巧克力.jpg', description: '使用頂級可可精心調製，激出絲絨奶香的奢華體驗', stock: 62, rating: 4.7, sales: 1340 },
                { id: 403, name: '森永 dars 巧克力 (47g)', category: 'chocolate', price: 15, image: './Image(chocolate)/森永dars巧克力.jpg', description: '一口大小的方塊設計，特製溫度感應標誌，提醒最佳品嚐時刻。', stock: 38, rating: 4.9, sales: 720 },
                { id: 404, name: 'cote d or 巧克力 (400g)', category: 'chocolate', price: 32, image: './Image(chocolate)/cote d or巧克力.jpg', description: '嚴選非洲與中美洲可可豆，絲滑口感中帶有厚實濃烈，令人回味無窮。', stock: 52, rating: 4.6, sales: 980 },
                { id: 405, name: '金莎朱古力禮盒 24粒 (300g)', category: 'chocolate', price: 125, image:'./Image(chocolate)/金莎朱古力禮盒.avif', description: '金色包裝閃耀奢華，圓潤造型，象徵圓滿與祝福，送禮自用皆體面。', stock: 45, rating: 4.8, sales: 890 },
                { id: 406, name: '明治牛奶朱古力 (120g)', category: 'chocolate', price: 30, image:'./Image(chocolate)/明治牛奶朱古力.jpg', description: '嚴選北歐牛奶與可可豆，經典板狀設計，簡單卻耐人回味。', stock: 62, rating: 4.7, sales: 1340 },
                { id: 407, name: 'M&M\'s 牛奶朱古力 (175.5g)', category: 'chocolate', price: 37.5, image:'./Image(chocolate)/M&M_牛奶朱古力.jpg', description: '紅、黃、藍、綠、橙、啡六色糖衣，帶來視覺與味覺的雙重享受。', stock: 38, rating: 4.9, sales: 720 },
                { id: 408, name: 'KitKat 朱古力威化 (150.8g)', category: 'chocolate', price: 24, image:'./Image(chocolate)/KitKat 朱古力威化.avif', description: '「Have a break, have a KitKat」——享受片刻輕鬆的最佳選擇。', stock: 52, rating: 4.6, sales: 980 },
                { id: 409, name: 'Cadbury 吉百利牛奶朱古力 (144g)', category: 'chocolate', price: 36, image:'./Image(chocolate)/Cadbury 吉百利牛奶朱古力.jpg', description: '入口即化的絲滑口感，帶來滿滿幸福感。', stock: 75, rating: 4.5, sales: 1100 },
                { id: 410, name: 'Ritter Sport 朱古力 (100g)', category: 'chocolate', price: 20, image:'./Image(chocolate)/Ritter Sport 朱古力.webp', description: '德國工藝製作，口感細膩又紮實。', stock: 68, rating: 4.4, sales: 950 },
                { id: 411, name: 'Lindt 瑞士蓮軟心朱古力 (200g)', category: 'chocolate', price: 79, image:'./Image(chocolate)/Lindt 瑞士蓮軟心朱古力.jpg', description: '每一顆都是「融情時刻」，讓幸福在舌尖綻放。', stock: 42, rating: 4.9, sales: 680 },
                { id: 412, name: 'Toblerone 三角朱古力 (100g)', category: 'chocolate', price: 14, image:'./Image(chocolate)/Toblerone 三角朱古力.jpeg', description: '獨特三角造型，象徵瑞士阿爾卑斯山的壯麗。', stock: 55, rating: 4.7, sales: 820 },
                { id: 413, name: 'Hershey\'s Kisses 朱古力 (146g)', category: 'chocolate', price: 40, image: './Image(chocolate)/Hershey’s Kisses 朱古力.jpg', description: '經典水滴造型，小巧可愛，一口剛剛好。', stock: 28, rating: 4.9, sales: 350 },
                { id: 414, name: 'Snickers 士力架朱古力 (240g)', category: 'chocolate', price: 25, image:'./Image(chocolate)/Snickers 士力架朱古力.jpg', description: '「餓了就吃士力架」，簡單直接的能量宣言。', stock: 88, rating: 4.6, sales: 1250 },
                { id: 415, name: 'Twix 特趣朱古力 (159.5g)', category: 'chocolate', price: 35, image:'./Image(chocolate)/Twix 特趣朱古力.avif', description: '外層濃郁巧克力，內裡甜蜜焦糖，咬下瞬間層次分明。', stock: 72, rating: 4.5, sales: 980 },
                { id: 416, name: 'Maltesers 麥提莎朱古力 (90g)', category: 'chocolate', price: 16.5, image:'./Image(chocolate)/Maltesers 麥提莎朱古力.jpg', description: '「Look on the light side」——帶來輕鬆愉快的心情。', stock: 60, rating: 4.7, sales: 780 },
                { id: 417, name: '白之戀人白朱古力 (44.5g)', category: 'chocolate', price: 78, image:'./Image(chocolate)/白之戀人白朱古力.jpg', description: '純白甜美，簡約典雅的包裝，傳遞高雅與溫暖心意。', stock: 35, rating: 4.8, sales: 450 },
                { id: 418, name: 'Meiji Almond 朱古力 (79g)', category: 'chocolate', price: 30, image:'./Image(chocolate)/Meiji Almond 朱古力.webp', description: '精選加州杏仁，閃亮如寶石的外觀，既美味又適合分享。', stock: 40, rating: 4.9, sales: 520 },
                
                // 堅果類
                { id: 501, name: '綜合堅果', category: 'nuts', price: 39, image: './Image(nuts)/綜合堅果.jpg', description: '營養豐富健康零食', stock: 55, rating: 4.7, sales: 1120 },
                { id: 502, name: '夏威夷豆', category: 'nuts', price: 49, image: './Image(nuts)/夏威夷豆.jpg', description: '香脆可口', stock: 32, rating: 4.8, sales: 670 },
                { id: 503, name: '腰果', category: 'nuts', price: 38, image: './Image(nuts)/腰果.jpg', description: '原味烘焙', stock: 48, rating: 4.6, sales: 890 },
                { id: 504, name: 'Andi_無鹽雜果仁', category: 'nuts', price: 45, image: './Image(nuts)/Andi_無鹽雜果仁.jpg', description: '無鹽添加，原味健康', stock: 40, rating: 4.7, sales: 70 },
                { id: 505, name: 'Heritage_無添加胡桃果仁', category: 'nuts', price: 95, image: './Image(nuts)/Heritage_無添加胡桃果仁.jpg', description: '無添加，胡桃原香', stock: 40, rating: 4.7, sales: 76 },
                { id: 506, name: 'Kirkland_碧根果仁', category: 'nuts', price: 88, image: './Image(nuts)/Kirkland_碧根果仁.jpg', description: '顆顆飽滿，香酥可口', stock: 85, rating: 4.2, sales: 73 },
                { id: 507, name: 'SUNKIST_雜錦果仁禮盒', category: 'nuts', price: 120, image: './Image(nuts)/SUNKIST_雜錦果仁禮盒.jpg', description: '精美禮盒，送禮首選', stock: 78, rating: 4.7, sales: 54 },
                { id: 508, name: '甘源_繽紛綜合果仁', category: 'nuts', price: 35, image: './Image(nuts)/甘源_繽紛綜合果仁.jpg', description: '多種果仁，繽紛搭配', stock: 80, rating: 4.6, sales: 121 },
                { id: 509, name: '紅布朗_頂級生機果仁', category: 'nuts', price: 68, image: './Image(nuts)/紅布朗_頂級生機果仁.jpg', description: '頂級品質，低溫烘焙', stock: 140, rating: 4.4, sales: 49 },
                { id: 510, name: '開心果', category: 'nuts', price: 64, image: './Image(nuts)/開心果.jpg', description: '美國進口', stock: 89, rating: 4.7, sales: 60 },
                


                // 雪糕類 
                { id: 601, name: 'Häagen-Dazs 雲呢拿雪糕 (473ml)', category: 'ice-cream', price: 89, image: './Image(ice-cream)/Häagen-Dazs 雲呢拿雪糕.jpg', description: '嚴選頂級馬達加斯加雲呢拿，濃郁奶香與天然雲呢拿完美融合，簡單配方，卻帶來極致奢華的味覺享受。', stock: 25, rating: 4.8, sales: 850 },
                { id: 602, name: 'Häagen-Dazs 士多啤梨雪糕 (473ml)', category: 'ice-cream', price: 89, image: './Image(ice-cream)/Häagen-Dazs 士多啤梨雪糕.webp', description: '幼滑雪糕質感，入口即化，每一口都能嚐到果肉纖維，果香與奶香完美交融。', stock: 22, rating: 4.7, sales: 720 },
                { id: 603, name: 'Dreyer\'s 朱古力雪糕 (1.5L)', category: 'ice-cream', price: 68, image: './Image(ice-cream)/Dreyer s 朱古力雪糕.jpg', description: '幼滑細緻的朱古力雪糕，加入香濃朱古力粒，帶來多重朱古力享受，增添層次與驚喜口感。', stock: 35, rating: 4.6, sales: 980 },
                { id: 604, name: 'Dreyer\'s 雲呢拿雪糕 (1.5L)', category: 'ice-cream', price: 68, image: './Image(ice-cream)/Dreyer s 雲呢拿雪糕.avif', description: '「The Taste that Moves 一嚐心動」，跨越世代的經典滋味。', stock: 38, rating: 4.5, sales: 920 },
                { id: 605, name: 'Movenpick 雲呢拿夢幻雪糕 (500ml)', category: 'ice-cream', price: 75, image: './Image(ice-cream)/Movenpick 雲呢拿夢幻雪糕.avif', description: '經典皇牌口味，融合瑞士阿爾卑斯山上乘忌廉，口感幼滑細膩。', stock: 20, rating: 4.9, sales: 650 },
                { id: 606, name: 'Movenpick 士多啤梨雪糕 (500ml)', category: 'ice-cream', price: 75, image: './Image(ice-cream)/Movenpick 士多啤梨雪糕.avif', description: '瑞士工藝打造，真實果肉融入其中，酸甜平衡，帶來清新爽口的滋味。', stock: 18, rating: 4.8, sales: 580 },
                { id: 607, name: '雀巢牛奶公司雲呢拿雪糕 (1L)', category: 'ice-cream', price: 45, image: './Image(ice-cream)/雀巢牛奶公司雲呢拿雪糕.jpg', description: '雀巢百年品牌，經典口味，簡單卻奢華，每一口都是幸福的延續。', stock: 50, rating: 4.4, sales: 1200 },
                { id: 608, name: '雀巢牛奶公司朱古力雪糕 (1L)', category: 'ice-cream', price: 45, image: './Image(ice-cream)/雀巢牛奶公司朱古力雪糕.jpg', description: '雀巢百年品牌，濃郁可可香氣，入口即化，冰涼香甜，每一口都是夏日的幸福滋味。', stock: 48, rating: 4.4, sales: 1100 },
                { id: 609, name: '阿波羅豆腐紅豆糯米糍', category: 'ice-cream', price: 12, image: './Image(ice-cream)/阿波羅豆腐紅豆糯米糍.jpg', description: '幼滑豆腐雪糕內餡，香甜紅豆粒粒分明，小巧精緻，一口滿足，傳統紅豆與創新豆腐雪糕的完美結合。', stock: 80, rating: 4.3, sales: 950 },
                { id: 610, name: '阿波羅雙重朱古力糯米糍', category: 'ice-cream', price: 12, image: './Image(ice-cream)/阿波羅雙重朱古力糯米糍.png', description: '外層糯米皮軟糯彈牙，內餡朱古力雪糕香濃幼滑，雙重朱古力層次，滿足朱古力控的極致渴望。', stock: 75, rating: 4.3, sales: 880 },
                { id: 611, name: '維記牛奶雪糕杯 (100ml)', category: 'ice-cream', price: 10, image: './Image(ice-cream)/維記牛奶雪糕杯.jpg', description: '經典港式風味，小巧杯裝設計，安心享受天然滋味。', stock: 90, rating: 4.2, sales: 1050 },
                { id: 612, name: '維記朱古力雪糕杯 (100ml)', category: 'ice-cream', price: 10, image: './Image(ice-cream)/維記朱古力雪糕杯.png', description: '嚴選優質牛奶與朱古力，雪糕質感細膩綿密，打造純正港式風味，陪伴幾代香港人成長的集體回憶。', stock: 85, rating: 4.2, sales: 980 },
                { id: 613, name: 'Ben & Jerry\'s 朱古力布朗尼雪糕 (473ml)', category: 'ice-cream', price: 85, image: './Image(ice-cream)/Ben & Jerry s 朱古力布朗尼雪糕.jpg', description: '濃郁朱古力雪糕基底，混入大塊布朗尼蛋糕，甜中帶微苦，每一口都能咬到真材實料的布朗尼驚喜。', stock: 15, rating: 4.7, sales: 420 },
                { id: 614, name: 'Ben & Jerry\'s 曲奇雪糕 (473ml)', category: 'ice-cream', price: 85, image: './Image(ice-cream)/Ben & Jerry s 曲奇雪糕.jpg', description: '香濃奶油雪糕基底，混入大塊曲奇餅乾，甜中帶點鹹香，層次豐富不單調。', stock: 16, rating: 4.6, sales: 380 },
                { id: 615, name: '明治抹茶雪糕杯 (100ml)', category: 'ice-cream', price: 18, image: './Image(ice-cream)/明治抹茶雪糕杯.png', description: '嚴選 100% 宇治抹茶製作，抹茶微苦與奶香交織，層次豐富，呈現自然純粹的抹茶滋味。', stock: 40, rating: 4.7, sales: 620 },
                { id: 616, name: '明治香草味杯裝雪糕 (100ml)', category: 'ice-cream', price: 18, image: './Image(ice-cream)/明治香草味杯裝雪糕.avif', description: '經典香草風味，嚴選優質乳製品，奶香與香草香氣完美融合，簡單純粹的配方，呈現自然真實的滋味。', stock: 38, rating: 4.6, sales: 580 },
                { id: 617, name: '森永雲尼拿雪糕杯 (100ml)', category: 'ice-cream', price: 16, image: './Image(ice-cream)/森永雲尼拿雪糕杯.png', description: '嚴選北海道牧場新鮮牛乳製作，加入天然雲呢拿香氣，不含乳化劑與穩定劑，健康安心之選。', stock: 42, rating: 4.5, sales: 520 },
                { id: 618, name: '森永白桃雪糕杯 (100ml)', category: 'ice-cream', price: 16, image: './Image(ice-cream)/森永白桃雪糕杯.jpg', description: '嚴選日本國產白桃果汁，每杯含有高達 23% 白桃汁，搭配北海道牛乳製作，榮獲國際味覺大獎三星，品質與美味兼備。', stock: 40, rating: 4.5, sales: 480 },
                { id: 619, name: '雀巢髒髒可可牛乳味糯米糍', category: 'ice-cream', price: 28, image: './Image(ice-cream)/雀巢髒髒可可牛乳味糯米糍.jpg', description: '外層以可可粉製成的糯米皮，內餡是香濃牛奶雪糕，可可與牛乳的經典組合，全新創意口味，為傳統糯米糍帶來新驚喜。', stock: 44, rating: 4.7, sales: 650 },
                { id: 620, name: '樂天TICO 可可脆皮風味雪糕(香草牛奶紅盒)', category: 'ice-cream', price: 35, image: './Image(ice-cream)/樂天TICO 可可脆皮風味雪糕(香草牛奶紅盒).png', description: '牛奶朱古力脆皮包裹香草雪糕，口感對比鮮明，每顆僅約 80 大卡，輕盈享受無負擔。', stock: 60, rating: 4.4, sales: 520 },
            ],
            
            // 分類
            categories: [
                { id: 'all', name: '全部商品', icon: 'fa-box' },
                { id: 'cookies', name: '餅乾', icon: 'fa-cookie-bite' },
                { id: 'chips', name: '薯片', icon: 'fa-bacon' },
                { id: 'candy', name: '糖果', icon: 'fa-candy-cane' },
                { id: 'chocolate', name: '朱古力', icon: 'fa-heart' },
                { id: 'nuts', name: '堅果', icon: 'fa-seedling' },
                { id: 'ice-cream', name: '雪糕', icon: 'fa-ice-cream' }
            ],
            
            // 優惠活動
            promotions: [
                { id: 1, title: '新年大促銷', description: '全館滿千折百', discount: 100, minPurchase: 1000, endDate: '2026-02-29', image: './promotion/新年大促銷.jpg' },
                { id: 2, title: '會員日', description: '會員專屬9折', discount: 15, type: 'percentage', endDate: '逢星期三', image: './promotion/會員日促銷活動.jpg' },
                { id: 3, title: '免運活動', description: '滿500免運費', freeShipping: true, minPurchase: 500, endDate: '2025-12-31', image: './promotion/滿500免運費.jpg' }
            ],
            
            // 獲取所有產品
            async getProducts(filters = {}) {
                await this.delay(300);
                let filtered = [...this.products];
                
                if (filters.category && filters.category !== 'all') {
                    filtered = filtered.filter(p => p.category === filters.category);
                }
                
                if (filters.search) {
                    const search = filters.search.toLowerCase();
                    filtered = filtered.filter(p => 
                        p.name.toLowerCase().includes(search) || 
                        p.description.toLowerCase().includes(search)
                    );
                }
                
                if (filters.sortBy) {
                    switch(filters.sortBy) {
                        case 'price-asc':
                            filtered.sort((a, b) => a.price - b.price);
                            break;
                        case 'price-desc':
                            filtered.sort((a, b) => b.price - a.price);
                            break;
                        case 'rating':
                            filtered.sort((a, b) => b.rating - a.rating);
                            break;
                        case 'sales':
                            filtered.sort((a, b) => b.sales - a.sales);
                            break;
                        default:
                            break;
                    }
                }
                
                return filtered;
            },
            
            // 獲取單一產品
            async getProduct(id) {
                await this.delay(200);
                return this.products.find(p => p.id === parseInt(id));
            },
            
            // 獲取分類
            async getCategories() {
                await this.delay(100);
                return this.categories;
            },
            
            // 獲取優惠活動
            async getPromotions() {
                await this.delay(200);
                return this.promotions;
            },
            
            // 用戶認證
            async login(email, password) {
                await this.delay(500);
                // 簡單的模擬登入
                if (email && password) {
                    const user = {
                        id: 1,
                        name: '王小明',
                        email: email,
                        phone: '0912-345-678',
                        joinDate: '2023-01-15',
                        points: 500
                    };
                    localStorage.setItem('user', JSON.stringify(user));
                    return { success: true, user };
                }
                return { success: false, message: '帳號或密碼錯誤' };
            },
            
            // 註冊
            async register(userData) {
                await this.delay(500);
                const user = {
                    id: Date.now(),
                    ...userData,
                    joinDate: new Date().toISOString().split('T')[0],
                    points: 0
                };
                localStorage.setItem('user', JSON.stringify(user));
                return { success: true, user };
            },
            
            // 獲取當前用戶
            getCurrentUser() {
                const userStr = localStorage.getItem('user');
                return userStr ? JSON.parse(userStr) : null;
            },
            
            // 登出
            logout() {
                localStorage.removeItem('user');
            },
            
            // 提交訂單
            async submitOrder(orderData) {
                await this.delay(800);
                const order = {
                    id: 'ORD' + Date.now(),
                    ...orderData,
                    date: new Date().toISOString(),
                    status: 'pending'
                };
                
                // 儲存訂單到 localStorage
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                orders.unshift(order);
                localStorage.setItem('orders', JSON.stringify(orders));
                
                return { success: true, order };
            },
            
            // 獲取用戶訂單
            async getOrders() {
                await this.delay(300);
                return JSON.parse(localStorage.getItem('orders') || '[]');
            },
            
            // 獲取訂單詳情
            async getOrder(id) {
                await this.delay(200);
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                return orders.find(o => o.id === id);
            }
        };
        
        // ==================== Context ====================
        const AppContext = createContext();
        
        const useApp = () => {
            const context = useContext(AppContext);
            if (!context) {
                throw new Error('useApp must be used within AppProvider');
            }
            return context;
        };
        
        // ==================== App Provider ====================
        const AppProvider = ({ children }) => {
            const [currentPage, setCurrentPage] = useState('home');
            const [cart, setCart] = useState(() => {
                const saved = localStorage.getItem('cart');
                return saved ? JSON.parse(saved) : [];
            });
            const [favorites, setFavorites] = useState(() => {
                const saved = localStorage.getItem('favorites');
                return saved ? JSON.parse(saved) : [];
            });
            const [user, setUser] = useState(DataService.getCurrentUser());
            const [toast, setToast] = useState(null);
            const [pageData, setPageData] = useState({});
            
            // 儲存購物車到 localStorage
            useEffect(() => {
                localStorage.setItem('cart', JSON.stringify(cart));
            }, [cart]);
            
            // 儲存收藏到 localStorage
            useEffect(() => {
                localStorage.setItem('favorites', JSON.stringify(favorites));
            }, [favorites]);
            
            // 導航到頁面
            const navigate = (page, data = {}) => {
                setCurrentPage(page);
                setPageData(data);
                window.scrollTo(0, 0);
            };
            
            // 添加到購物車
            const addToCart = (product, quantity = 1) => {
                setCart(prev => {
                    const existing = prev.find(item => item.id === product.id);
                    if (existing) {
                        return prev.map(item => 
                            item.id === product.id 
                                ? { ...item, quantity: item.quantity + quantity }
                                : item
                        );
                    }
                    return [...prev, { ...product, quantity }];
                });
                showToast('已加入購物車', 'success');
            };
            
            // 從購物車移除
            const removeFromCart = (productId) => {
                setCart(prev => prev.filter(item => item.id !== productId));
                showToast('已從購物車移除', 'info');
            };
            
            // 更新購物車數量
            const updateCartQuantity = (productId, quantity) => {
                if (quantity <= 0) {
                    removeFromCart(productId);
                    return;
                }
                setCart(prev => prev.map(item => 
                    item.id === productId ? { ...item, quantity } : item
                ));
            };
            
            // 清空購物車
            const clearCart = () => {
                setCart([]);
            };
            
            // 添加到收藏
            const toggleFavorite = (product) => {
                setFavorites(prev => {
                    const isFavorited = prev.some(item => item.id === product.id);
                    if (isFavorited) {
                        showToast('已從收藏移除', 'info');
                        return prev.filter(item => item.id !== product.id);
                    }
                    showToast('已加入收藏', 'success');
                    return [...prev, product];
                });
            };
            
            // 檢查是否已收藏
            const isFavorited = (productId) => {
                return favorites.some(item => item.id === productId);
            };
            
            // 登入
            const login = async (email, password) => {
                const result = await DataService.login(email, password);
                if (result.success) {
                    setUser(result.user);
                    showToast('登入成功', 'success');
                }
                return result;
            };
            
            // 註冊
            const register = async (userData) => {
                const result = await DataService.register(userData);
                if (result.success) {
                    setUser(result.user);
                    showToast('註冊成功', 'success');
                }
                return result;
            };
            
            // 登出
            const logout = () => {
                DataService.logout();
                setUser(null);
                showToast('已登出', 'info');
                navigate('home');
            };
            
            // 顯示提示
            const showToast = (message, type = 'info') => {
                setToast({ message, type });
                setTimeout(() => setToast(null), 3000);
            };
            
            // 計算購物車總計
            const cartTotal = useMemo(() => {
                return cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            }, [cart]);
            
            const value = {
                currentPage,
                navigate,
                cart,
                addToCart,
                removeFromCart,
                updateCartQuantity,
                clearCart,
                cartTotal,
                favorites,
                toggleFavorite,
                isFavorited,
                user,
                login,
                register,
                logout,
                toast,
                showToast,
                pageData
            };
            
            return <AppContext.Provider value={value}>{children}</AppContext.Provider>;
        };
        
        // ==================== Components ====================
        
        // Toast 通知
        const Toast = ({ message, type }) => {
            const bgColors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500'
            };
            
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-exclamation-circle',
                info: 'fa-info-circle',
                warning: 'fa-exclamation-triangle'
            };
            
            return (
                <div className={`toast ${bgColors[type]} text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-3`}>
                    <i className={`fas ${icons[type]}`}></i>
                    <span>{message}</span>
                </div>
            );
        };
        
        // Loading 組件
        const Loading = () => (
            <div className="flex justify-center items-center py-20">
                <div className="spinner"></div>
            </div>
        );
        
        // Chatbot 組件
        const Chatbot = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [messages, setMessages] = useState([
                {
                    id: 1,
                    text: '您好！我是零食天堂的客服小助手，有什麼可以幫助您的嗎？',
                    sender: 'bot',
                    timestamp: new Date()
                }
            ]);
            const [inputText, setInputText] = useState('');
            const [isTyping, setIsTyping] = useState(false);
            
            const quickReplies = [
                '推薦熱銷商品',
                '查看優惠活動',
                '運費怎麼計算',
                '如何追蹤訂單',
                '聯絡客服'
            ];
            
            const botResponses = {
                '推薦熱銷商品': '我們最熱銷的商品有：經典奶油餅乾、原味洋芋片、水果軟糖和黑巧克力。您可以在首頁的「熱銷商品」區塊查看詳細資訊！',
                '查看優惠活動': '我們目前有新年大促銷、會員專屬85折和滿350免運費等優惠活動。您可以在「優惠活動」頁面查看詳細資訊！',
                '運費怎麼計算': '訂單金額滿500元即可享有免運費優惠，未滿350元則運費為50元。',
                '如何追蹤訂單': '登入後在「會員中心」>「訂單查詢」中即可查看您的訂單狀態和物流資訊。',
                '聯絡客服': '您可以撥打客服專線 0800-123-456，或透過「聯絡我們」頁面發送訊息給我們，服務時間為週一至週日 09:00-21:00。',
                'default': '抱歉，我不太明白您的問題。您可以詢問關於商品推薦、優惠活動、運費計算或訂單查詢等問題。'
            };
            
            const handleSendMessage = () => {
                if (!inputText.trim()) return;
                
                // 添加用戶消息
                const userMessage = {
                    id: messages.length + 1,
                    text: inputText,
                    sender: 'user',
                    timestamp: new Date()
                };
                
                setMessages(prev => [...prev, userMessage]);
                setInputText('');
                setIsTyping(true);
                
                // 模擬機器人回應
                setTimeout(() => {
                    let response = botResponses.default;
                    
                    // 檢查是否有匹配的關鍵字
                    for (const key in botResponses) {
                        if (inputText.includes(key)) {
                            response = botResponses[key];
                            break;
                        }
                    }
                    
                    const botMessage = {
                        id: messages.length + 2,
                        text: response,
                        sender: 'bot',
                        timestamp: new Date()
                    };
                    
                    setMessages(prev => [...prev, botMessage]);
                    setIsTyping(false);
                }, 1500);
            };
            
            const handleQuickReply = (reply) => {
                setInputText(reply);
                // 自動發送快速回覆
                setTimeout(() => {
                    handleSendMessage();
                }, 100);
            };
            
            const handleKeyPress = (e) => {
                if (e.key === 'Enter') {
                    handleSendMessage();
                }
            };
            
            return (
                <div className="chatbot-container">
                    {isOpen && (
                        <div className="chatbot-window animate-fade-in">
                            <div className="chatbot-header">
                                <div className="flex items-center">
                                    <div className="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center mr-3">
                                        <i className="fas fa-robot"></i>
                                    </div>
                                    <div>
                                        <h3 className="font-semibold">零食小助手</h3>
                                        <p className="text-xs opacity-80">線上為您服務</p>
                                    </div>
                                </div>
                                <button 
                                    onClick={() => setIsOpen(false)}
                                    className="text-white opacity-70 hover:opacity-100"
                                >
                                    <i className="fas fa-times"></i>
                                </button>
                            </div>
                            
                            <div className="chatbot-messages">
                                {messages.map(message => (
                                    <div 
                                        key={message.id} 
                                        className={`message ${message.sender === 'bot' ? 'bot-message' : 'user-message'}`}
                                    >
                                        {message.text}
                                    </div>
                                ))}
                                
                                {isTyping && (
                                    <div className="chatbot-typing">
                                        <div className="typing-dot"></div>
                                        <div className="typing-dot"></div>
                                        <div className="typing-dot"></div>
                                    </div>
                                )}
                                
                                {messages.length === 1 && (
                                    <div className="quick-reply">
                                        {quickReplies.map((reply, index) => (
                                            <button
                                                key={index}
                                                className="quick-reply-button"
                                                onClick={() => handleQuickReply(reply)}
                                            >
                                                {reply}
                                            </button>
                                        ))}
                                    </div>
                                )}
                            </div>
                            
                            <div className="chatbot-input">
                                <input
                                    type="text"
                                    value={inputText}
                                    onChange={(e) => setInputText(e.target.value)}
                                    onKeyPress={handleKeyPress}
                                    placeholder="輸入您的問題..."
                                />
                                <button onClick={handleSendMessage}>
                                    <i className="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    )}
                    
                    <div 
                        className="chatbot-button"
                        onClick={() => setIsOpen(!isOpen)}
                    >
                        <i className={`fas ${isOpen ? 'fa-times' : 'fa-comments'}`}></i>
                    </div>
                </div>
            );
        };
        
        // Header 組件
        const Header = () => {
            const { navigate, cart, user, logout } = useApp();
            const [showMenu, setShowMenu] = useState(false);
            
            const cartItemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            return (
                <header className="bg-white shadow-md sticky top-0 z-50">
                    <div className="container mx-auto px-4">
                        <div className="flex items-center justify-between py-4">
                            {/* Logo */}
                            <div 
                                className="flex items-center space-x-2 cursor-pointer"
                                onClick={() => navigate('home')}
                            >
                                <i className="fas fa-cookie-bite text-3xl text-primary"></i>
                                <span className="text-2xl font-bold text-primary">零食天堂</span>
                            </div>
                            
                            {/* Desktop Navigation */}
                            <nav className="hidden md:flex items-center space-x-6">
                                <a onClick={() => navigate('home')} className="text-gray-700 hover:text-primary cursor-pointer transition">首頁</a>
                                <a onClick={() => navigate('products')} className="text-gray-700 hover:text-primary cursor-pointer transition">所有商品</a>
                                <a onClick={() => navigate('promotions')} className="text-gray-700 hover:text-primary cursor-pointer transition">優惠活動</a>
                                <a onClick={() => navigate('about')} className="text-gray-700 hover:text-primary cursor-pointer transition">關於我們</a>
                                <a onClick={() => navigate('contact')} className="text-gray-700 hover:text-primary cursor-pointer transition">聯絡我們</a>
                            </nav>
                            
                            {/* Icons */}
                            <div className="flex items-center space-x-4">
                                <button 
                                    onClick={() => navigate('search')}
                                    className="text-gray-700 hover:text-primary transition"
                                >
                                    <i className="fas fa-search text-xl"></i>
                                </button>
                                
                                <button 
                                    onClick={() => navigate('favorites')}
                                    className="text-gray-700 hover:text-primary transition relative"
                                >
                                    <i className="fas fa-heart text-xl"></i>
                                </button>
                                
                                <button 
                                    onClick={() => navigate('cart')}
                                    className="text-gray-700 hover:text-primary transition relative"
                                >
                                    <i className="fas fa-shopping-cart text-xl"></i>
                                    {cartItemCount > 0 && (
                                        <span className="absolute -top-2 -right-2 bg-secondary text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                                            {cartItemCount}
                                        </span>
                                    )}
                                </button>
                                
                                {user ? (
                                    <div className="relative group">
                                        <button className="text-gray-700 hover:text-primary transition">
                                            <i className="fas fa-user text-xl"></i>
                                        </button>
                                        <div className="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 hidden group-hover:block">
                                            <a onClick={() => navigate('profile')} className="block px-4 py-2 text-gray-700 hover:bg-gray-100 cursor-pointer">會員中心</a>
                                            <a onClick={() => navigate('orders')} className="block px-4 py-2 text-gray-700 hover:bg-gray-100 cursor-pointer">訂單查詢</a>
                                            <a onClick={logout} className="block px-4 py-2 text-gray-700 hover:bg-gray-100 cursor-pointer">登出</a>
                                        </div>
                                    </div>
                                ) : (
                                    <button 
                                        onClick={() => navigate('login')}
                                        className="text-gray-700 hover:text-primary transition"
                                    >
                                        <i className="fas fa-user text-xl"></i>
                                    </button>
                                )}
                                
                                {/* Mobile Menu Toggle */}
                                <button 
                                    className="md:hidden text-gray-700"
                                    onClick={() => setShowMenu(!showMenu)}
                                >
                                    <i className={`fas ${showMenu ? 'fa-times' : 'fa-bars'} text-xl`}></i>
                                </button>
                            </div>
                        </div>
                        
                        {/* Mobile Navigation */}
                        {showMenu && (
                            <nav className="md:hidden py-4 border-t animate-slide-in">
                                <a onClick={() => { navigate('home'); setShowMenu(false); }} className="block py-2 text-gray-700 hover:text-primary cursor-pointer">首頁</a>
                                <a onClick={() => { navigate('products'); setShowMenu(false); }} className="block py-2 text-gray-700 hover:text-primary cursor-pointer">所有商品</a>
                                <a onClick={() => { navigate('promotions'); setShowMenu(false); }} className="block py-2 text-gray-700 hover:text-primary cursor-pointer">優惠活動</a>
                                <a onClick={() => { navigate('about'); setShowMenu(false); }} className="block py-2 text-gray-700 hover:text-primary cursor-pointer">關於我們</a>
                                <a onClick={() => { navigate('contact'); setShowMenu(false); }} className="block py-2 text-gray-700 hover:text-primary cursor-pointer">聯絡我們</a>
                            </nav>
                        )}
                    </div>
                </header>
            );
        };
        
        // Footer 組件
        const Footer = () => {
            const { navigate } = useApp();
            
            return (
                <footer className="bg-gray-900 text-white mt-20">
                    <div className="container mx-auto px-4 py-12">
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
                            <div>
                                <h3 className="text-xl font-bold mb-4 flex items-center">
                                    <i className="fas fa-cookie-bite mr-2"></i>
                                    零食天堂
                                </h3>
                                <p className="text-gray-400">
                                    提供最優質的零食，讓您的生活更甜蜜
                                </p>
                            </div>
                            
                            <div>
                                <h4 className="text-lg font-semibold mb-4">快速連結</h4>
                                <ul className="space-y-2">
                                    <li><a onClick={() => navigate('about')} className="text-gray-400 hover:text-white cursor-pointer transition">關於我們</a></li>
                                    <li><a onClick={() => navigate('products')} className="text-gray-400 hover:text-white cursor-pointer transition">所有商品</a></li>
                                    <li><a onClick={() => navigate('promotions')} className="text-gray-400 hover:text-white cursor-pointer transition">優惠活動</a></li>
                                    <li><a onClick={() => navigate('faq')} className="text-gray-400 hover:text-white cursor-pointer transition">常見問題</a></li>
                                </ul>
                            </div>
                            
                            <div>
                                <h4 className="text-lg font-semibold mb-4">客戶服務</h4>
                                <ul className="space-y-2">
                                    <li><a onClick={() => navigate('contact')} className="text-gray-400 hover:text-white cursor-pointer transition">聯絡我們</a></li>
                                    <li><a onClick={() => navigate('orders')} className="text-gray-400 hover:text-white cursor-pointer transition">訂單查詢</a></li>
                                    <li><a className="text-gray-400 hover:text-white cursor-pointer transition">退換貨政策</a></li>
                                    <li><a className="text-gray-400 hover:text-white cursor-pointer transition">隱私權政策</a></li>
                                </ul>
                            </div>
                            
                            <div>
                                <h4 className="text-lg font-semibold mb-4">聯絡資訊</h4>
                                <ul className="space-y-2 text-gray-400">
                                    <li><i className="fas fa-phone mr-2"></i> 0800-123-456</li>
                                    <li><i className="fas fa-envelope mr-2"></i> service@snackheaven.com</li>
                                    <li><i className="fas fa-map-marker-alt mr-2"></i> 九龍尖沙咀東科學館道16號華懋廣場UG3樓</li>
                                </ul>
                                <div className="flex space-x-4 mt-4">
                                    <a href="#" className="text-gray-400 hover:text-white transition"><i className="fab fa-facebook text-2xl"></i></a>
                                    <a href="#" className="text-gray-400 hover:text-white transition"><i className="fab fa-instagram text-2xl"></i></a>
                                    <a href="#" className="text-gray-400 hover:text-white transition"><i className="fab fa-line text-2xl"></i></a>
                                </div>
                            </div>
                        </div>
                        
                        <div className="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                            <p>&copy; 2025 零食天堂. All rights reserved.</p>
                        </div>
                    </div>
                </footer>
            );
        };
        
        // 產品卡片組件
        const ProductCard = ({ product }) => {
            const { navigate, addToCart, toggleFavorite, isFavorited } = useApp();
            const favorited = isFavorited(product.id);
            
            return (
                <div className="product-card bg-white rounded-lg shadow-md overflow-hidden">
                    <div className="relative">
                        <img 
                            src={product.image} 
                            alt={product.name}
                            className="w-full h-48 object-cover cursor-pointer"
                            onClick={() => navigate('product-detail', { productId: product.id })}
                        />
                        <button 
                            onClick={() => toggleFavorite(product)}
                            className="absolute top-2 right-2 bg-white rounded-full w-10 h-10 flex items-center justify-center shadow-md hover:scale-110 transition"
                        >
                            <i className={`fas fa-heart ${favorited ? 'text-secondary' : 'text-gray-400'}`}></i>
                        </button>
                        {product.stock < 10 && (
                            <span className="absolute top-2 left-2 bg-secondary text-white px-2 py-1 rounded text-xs">
                                剩餘 {product.stock} 件
                            </span>
                        )}
                    </div>
                    
                    <div className="p-4">
                        <h3 
                            className="text-lg font-semibold mb-2 cursor-pointer hover:text-primary transition"
                            onClick={() => navigate('product-detail', { productId: product.id })}
                        >
                            {product.name}
                        </h3>
                        <p className="text-gray-600 text-sm mb-3">{product.description}</p>
                        
                        <div className="flex items-center mb-3">
                            <div className="flex text-warning">
                                {[...Array(5)].map((_, i) => (
                                    <i key={i} className={`fas fa-star ${i < Math.floor(product.rating) ? '' : 'text-gray-300'}`}></i>
                                ))}
                            </div>
                            <span className="text-gray-600 text-sm ml-2">({product.rating})</span>
                        </div>
                        
                        <div className="flex items-center justify-between">
                            <span className="text-2xl font-bold text-primary">HK$ {product.price}</span>
                            <button 
                                onClick={() => addToCart(product)}
                                className="btn-primary bg-primary text-white px-4 py-2 rounded-lg hover:bg-opacity-90"
                            >
                                <i className="fas fa-cart-plus mr-2"></i>
                                加入購物車
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // 新增组件：英雄区
        const HeroSection = () => {
            const { navigate } = useApp();
            
            return (
                <section className="hero-section">
                    <div className="container mx-auto px-4">
                        <div className="hero-content">
                            <h1>甜蜜零食時光</h1>
                            <h2>由此刻開始</h2>
                            <p>精選全球優質零食，為您帶來最純真的味覺享受。新鮮美味，品質保證，讓每一口都充滿幸福感。</p>
                            <div className="hero-buttons">
                                <a onClick={() => navigate('products')} className="btn">立即購買</a>
                                <a onClick={() => navigate('about')} className="btn btn-pink">了解更多</a>
                            </div>
                            <div className="hero-stats">
                                <div className="stat-item">
                                    <span className="stat-number">500+</span>
                                    <span className="stat-text">精選商品</span>
                                </div>
                                <div className="stat-item">
                                    <span className="stat-number">10萬+</span>
                                    <span className="stat-text">滿意客戶</span>
                                </div>
                                <div className="stat-item">
                                    <span className="stat-number">24小時</span>
                                    <span className="stat-text">快速配送</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            );
        };
        
        // 新增组件：精选商品
        const FeaturedProductsSection = () => {
            const { navigate } = useApp();
            const [activeTab, setActiveTab] = useState('hot');
            const [products, setProducts] = useState([]);
            const [loading, setLoading] = useState(true);
            
            useEffect(() => {
                loadProducts();
            }, [activeTab]);
            
            const loadProducts = async () => {
                setLoading(true);
                let sortBy = 'sales';
                if (activeTab === 'new') {
                    sortBy = '';
                }
                const productsData = await DataService.getProducts({ sortBy });
                // 模拟新品 - 取前6个
                const displayedProducts = activeTab === 'new' ? 
                    productsData.slice(0, 6) : 
                    productsData.slice(0, 8);
                setProducts(displayedProducts);
                setLoading(false);
            };
            
            return (
                <section className="featured-products-section">
                    <div className="container mx-auto px-4">
                        <div className="section-title">
                            <h2><b>精選商品</b></h2>
                            <p>嚴選優質零食，為您帶來最棒的味覺體驗</p>
                        </div>
                        <div className="product-tabs">
                            <button 
                                className={`tab-btn ${activeTab === 'hot' ? 'active' : ''}`}
                                onClick={() => setActiveTab('hot')}
                            >
                                熱銷商品
                            </button>
                            <button 
                                className={`tab-btn ${activeTab === 'new' ? 'active' : ''}`}
                                onClick={() => setActiveTab('new')}
                            >
                                新品上市
                            </button>
                        </div>
                        {loading ? (
                            <Loading />
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
                                {products.map(product => (
                                    <ProductCard key={product.id} product={product} />
                                ))}
                            </div>
                        )}
                        <div className="view-more">
                            <a onClick={() => navigate('products')} className="btn btn-pink">查看更多商品</a>
                        </div>
                    </div>
                </section>
            );
        };
        
        // 新增组件：优惠活动
        const PromotionsSection = () => {
            const { navigate } = useApp();
            
            return (
                <section className="promotions-section">
                    <div className="container mx-auto px-4">
                        <div className="section-title">
                            <h2><b>限時優惠</b></h2>
                            <p>把握機會，享受超值優惠與貼心服務</p>
                        </div>
                        <div className="promotion-grid">
                            <div className="promotion-card">
                                <div className="promotion-img">
                                    <img src="./promotion/會員日促銷活動.jpg" alt="會員日優惠"/>
                                </div>
                                <div className="promotion-content">
                                    <h3 className="promotion-title">會員日</h3>
                                    <p className="promotion-desc">會員專屬 9 折優惠立即登入成為會員，購物即可享受 9 折優惠還有更多會員專屬福利等著您！</p>
                                    <a onClick={() => navigate('login')} className="btn">立即登入</a>
                                </div>
                            </div>
                            <div className="promotion-card">
                                <div className="promotion-img">
                                    <img src="./promotion/滿500免運費.jpg" alt="免運活動"/>
                                </div>
                                <div className="promotion-content">
                                    <h3 className="promotion-title">免運活動</h3>
                                    <p className="promotion-desc">購物滿 HK$ 500 免運費全館商品購物滿 500 元即享免運費服務，讓您輕鬆享受購物樂趣！</p>
                                    <a onClick={() => navigate('products')} className="btn">開始購物</a>
                                </div>
                            </div>
                        </div>
                        <div className="anniversary-card">
                            <h3 className="anniversary-title">🎉 新年大促銷</h3>
                            <p className="anniversary-desc">全館商品最低 85 折起，還有神秘禮品等您來拿！</p>
                            <a onClick={() => navigate('promotions')} className="btn">查看活動詳情</a>
                            <p className="anniversary-time">活動時間：即日起至 28/2/26</p>
                        </div>
                    </div>
                </section>
            );
        };
        
        // 新增组件：客户评价
        const TestimonialsSection = () => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const sliderRef = useRef(null);
            
            const testimonials = [
                {
                    id: 1,
                    name: "王小明",
                    rating: 5,
                    text: "零食品質非常好，配送速度也很快，已經回購多次了！最喜歡他們的朱古力，濃郁又不甜膩。",
                    avatar: "fas fa-user"
                },
                {
                    id: 2,
                    name: "李小花",
                    rating: 5,
                    text: "第一次購買就愛上了，餅乾非常酥脆，包裝也很精美，送禮自用兩相宜。",
                    avatar: "fas fa-user"
                },
                {
                    id: 3,
                    name: "張小美",
                    rating: 4,
                    text: "薯片口味多樣，每一種都很好吃。客服態度很好，解決問題迅速。",
                    avatar: "fas fa-user"
                },
                {
                    id: 4,
                    name: "陳小華",
                    rating: 5,
                    text: "糖果種類豐富，孩子們非常喜歡。價格合理，品質有保證，會繼續支持！",
                    avatar: "fas fa-user"
                }
            ];
            
            useEffect(() => {
                const interval = setInterval(() => {
                    setCurrentSlide(prev => (prev + 1) % testimonials.length);
                }, 5000);
                
                return () => clearInterval(interval);
            }, [testimonials.length]);
            
            useEffect(() => {
                if (sliderRef.current) {
                    sliderRef.current.style.transform = `translateX(-${currentSlide * 100}%)`;
                }
            }, [currentSlide]);
            
            const nextSlide = () => {
                setCurrentSlide(prev => (prev + 1) % testimonials.length);
            };
            
            const prevSlide = () => {
                setCurrentSlide(prev => (prev - 1 + testimonials.length) % testimonials.length);
            };
            
            return (
                <section className="testimonials-section">
                    <div className="container mx-auto px-4">
                        <div className="section-title">
                            <h2><b>客戶好評</b></h2>
                            <p>聽聽我們滿意客戶的真實分享</p>
                        </div>
                        <div className="testimonial-slider">
                            <div className="slider-arrow left" onClick={prevSlide}>
                                <i className="fas fa-chevron-left"></i>
                            </div>
                            <div className="testimonial-track" ref={sliderRef}>
                                {testimonials.map(testimonial => (
                                    <div key={testimonial.id} className="testimonial-slide">
                                        <div className="testimonial-card">
                                            <div className="user-avatar">
                                                <i className={testimonial.avatar}></i>
                                            </div>
                                            <h4 className="user-name">{testimonial.name}</h4>
                                            <div className="user-rating">
                                                {Array.from({ length: 5 }).map((_, i) => (
                                                    <i 
                                                        key={i} 
                                                        className={`fas fa-star ${i < testimonial.rating ? 'filled' : ''}`}
                                                    ></i>
                                                ))}
                                            </div>
                                            <p className="testimonial-text">{testimonial.text}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            <div className="slider-arrow right" onClick={nextSlide}>
                                <i className="fas fa-chevron-right"></i>
                            </div>
                            <div className="slider-nav">
                                {testimonials.map((_, index) => (
                                    <div 
                                        key={index}
                                        className={`slider-dot ${index === currentSlide ? 'active' : ''}`}
                                        onClick={() => setCurrentSlide(index)}
                                    ></div>
                                ))}
                            </div>
                        </div>
                        <div className="testimonial-stats">
                            <div className="testimonial-stat">
                                <span className="testimonial-number">4.9</span>
                                <span className="testimonial-label">評分</span>
                            </div>
                            <div className="testimonial-stat">
                                <span className="testimonial-number">2580</span>
                                <span className="testimonial-label">顧客</span>
                            </div>
                            <div className="testimonial-stat">
                                <span className="testimonial-number">98%</span>
                                <span className="testimonial-label">滿意度</span>
                            </div>
                            <div className="testimonial-stat">
                                <span className="testimonial-number">24</span>
                                <span className="testimonial-label">小時客服</span>
                            </div>
                        </div>
                    </div>
                </section>
            );
        };
        
        // 新增组件：合作夥伴公司輪播
        const PartnersSection = () => {
            useEffect(() => {
                // 綁定點擊與鍵盤事件
                const partnerItems = document.querySelectorAll('.partner-item');
                
                partnerItems.forEach(item => {
                    const url = item.getAttribute('data-url');
                    const content = item.querySelector('.partner-item-content');
                    
                    if (!content) return;
                    
                    if (url) {
                        content.style.cursor = 'pointer';
                        content.setAttribute('title', '點擊開啟官方網站');
                    }
                    
                    // 滑鼠點擊
                    content.addEventListener('click', (e) => {
                        e.stopPropagation();
                        if (!url) return;
                        window.open(url, '_blank', 'noopener,noreferrer');
                    });
                    
                    // 鍵盤操作（Enter / Space）
                    content.addEventListener('keydown', (e) => {
                        if (!url) return;
                        const isEnter = e.key === 'Enter';
                        const isSpace = e.key === ' ';
                        if (isEnter || isSpace) {
                            e.preventDefault();
                            window.open(url, '_blank', 'noopener,noreferrer');
                        }
                    });
                });
            }, []);
            
            return (
                <section className="partners-section">
                    <div className="container mx-auto px-4">
                        <div className="section-title">
                            <h2><b>合作夥伴</b></h2>
                            <p>與香港知名零食品牌攜手合作，為您帶來更多優質選擇</p>
                        </div>
                        
                        <div className="partners-slider-container">
                            <div tabindex="0" className="partners-slider" style={{
                                "--width": "180px",
                                "--height": "200px",
                                "--quantity": "10",
                                "--duration": "30s"
                            }}>
                                <ul className="partners-list">
                                    {/* 百佳（PARKnSHOP） */}
                                    <li className="partner-item" style={{"--position": "1"}} data-url="https://www.pns.hk/zh-hk/?gad_source=1&gad_campaignid=19559174526&gbraid=0AAAAADcibqZ34i1T9yO1gT4lD0obrKNIF&gclid=Cj0KCQiAq7HIBhDoARIsAOATDxDIZ1HUyUr5R8iXT-0wtxoKzTJqABx_GTPEDIgr0SMhZoQ1F8R7KWkaAuvSEALw_wcB">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 百佳 官方網站">
                                            <img src="./Image(合作夥伴公司)/百佳.png" alt="百佳" />
                                            <div className="brand-name">百佳</div>
                                        </div>
                                    </li>
                                    {/* 惠康（Wellcome） */}
                                    <li className="partner-item" style={{"--position": "2"}} data-url="https://www.wellcome.com.hk/d/bacB43D2Eu.html?gad_source=1&gad_campaignid=20983663813&gbraid=0AAAAAqcn5mB4j2oZd6WNpL3cYPl4IZTH0&gclid=Cj0KCQiAq7HIBhDoARIsAOATDxB8VRaS9WOi3qOszIhEYUX8bNO7sX_Ooldn8lvUqdjTxXmbXsgFaQIaAkZXEALw_wcB">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 惠康 官方網站">
                                            <img src="./Image(合作夥伴公司)/惠康.webp" alt="惠康" />
                                            <div className="brand-name">惠康</div>
                                        </div>
                                    </li>
                                    {/* 759阿信屋 */}
                                    <li className="partner-item" style={{"--position": "3"}} data-url="https://www.759store.com/">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 759阿信屋 官方網站">
                                            <img src="./Image(合作夥伴公司)/759阿信屋.png" alt="759阿信屋" />
                                            <div className="brand-name">759阿信屋</div>
                                        </div>
                                    </li>
                                    {/* 優之良品（Best Mart 360） */}
                                    <li className="partner-item" style={{"--position": "4"}} data-url="http://ajiichiban.com/">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 優之良品 官方網站">
                                            <img src="./Image(合作夥伴公司)/優之良品.jpg" alt="優之良品" />
                                            <div className="brand-name">優之良品</div>
                                        </div>
                                    </li>
                                    {/* 零食物語（請確認實際網站） */}
                                    <li className="partner-item" style={{"--position": "5"}} data-url="https://www.okashiland.com/">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 零食物語 官方網站">
                                            <img src="./Image(合作夥伴公司)/零食物語.png" alt="零食物語" />
                                            <div className="brand-name">零食物語</div>
                                        </div>
                                    </li>
                                    {/* 價真棧（請確認實際網站） */}
                                    <li className="partner-item" style={{"--position": "6"}} data-url="https://www.prizemart.com/index.php/ct/">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 價真棧 官方網站">
                                            <img src="./Image(合作夥伴公司)/價真棧.jpg" alt="價真棧" />
                                            <div className="brand-name">價真棧</div>
                                        </div>
                                    </li>
                                    {/* 大生生活超市（請確認實際網站） */}
                                    <li className="partner-item" style={{"--position": "7"}} data-url="https://www.daisangapp.com/">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 大生生活超市 官方網站">
                                            <img src="./Image(合作夥伴公司)/大生生活超市.png" alt="大生生活超市" />
                                            <div className="brand-name">大生生活超市</div>
                                        </div>
                                    </li>
                                    {/* 新記食品有限公司（請確認實際網站） */}
                                    <li className="partner-item" style={{"--position": "8"}} data-url="https://www.sunkeehk.com/">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 新記食品有限公司 官方網站">
                                            <img src="./Image(合作夥伴公司)/新記食品有限公司.jpg" alt="新記食品有限公司" />
                                            <div className="brand-name">新記食品有限公司</div>
                                        </div>
                                    </li>
                                    {/* 時興隆（請確認實際網站） */}
                                    <li className="partner-item" style={{"--position": "9"}} data-url="https://www.shlhk.com/">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 時興隆 官方網站">
                                            <img src="./Image(合作夥伴公司)/時興隆.png" alt="時興隆" />
                                            <div className="brand-name">時興隆</div>
                                        </div>
                                    </li>
                                    {/* 四洲集團 */}
                                    <li className="partner-item" style={{"--position": "10"}} data-url="https://www.fourseasgroup.com.hk/hk/">
                                        <div className="partner-item-content" tabindex="0" aria-label="前往 四洲集團 官方網站">
                                            <img src="./Image(合作夥伴公司)/四洲集團.png" alt="四洲集團" />
                                            <div className="brand-name">四洲集團</div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            );
        };
        
        // ==================== Pages ====================
        
        // 首頁
        const HomePage = () => {
            const { navigate } = useApp();
            const [categories, setCategories] = useState([]);
            
            useEffect(() => {
                loadCategories();
            }, []);
            
            const loadCategories = async () => {
                const categoriesData = await DataService.getCategories();
                setCategories(categoriesData);
            };
            
            return (
                <div className="animate-fade-in">
                    {/* 英雄区 */}
                    <HeroSection />
                    
                    {/* Categories */}
                    <section className="container mx-auto px-4 py-16">
                        <h2 className="text-3xl font-bold text-center mb-10">商品分類</h2>
                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                            {categories.filter(c => c.id !== 'all').map(category => (
                                <div 
                                    key={category.id}
                                    onClick={() => navigate('category', { category: category.id })}
                                    className="bg-white rounded-lg shadow-md p-6 text-center cursor-pointer hover:shadow-lg transition transform hover:-translate-y-1"
                                >
                                    <i className={`fas ${category.icon} text-4xl text-primary mb-3`}></i>
                                    <h3 className="font-semibold">{category.name}</h3>
                                </div>
                            ))}
                        </div>
                    </section>
                    
                    {/* 精选商品 */}
                    <FeaturedProductsSection />
                    
                    {/* 优惠活动 */}
                    <PromotionsSection />
                    
                    {/* 客户评价 */}
                    <TestimonialsSection />
                    
                    {/* 合作夥伴公司 */}
                    <PartnersSection />
                    
                    {/* Features */}
                    <section className="container mx-auto px-4 py-16">
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div className="text-center">
                                <div className="bg-primary bg-opacity-10 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4">
                                    <i className="fas fa-shipping-fast text-3xl text-primary"></i>
                                </div>
                                <h3 className="text-xl font-semibold mb-2">快速配送</h3>
                                <p className="text-gray-600">24小時內快速出貨</p>
                            </div>
                            
                            <div className="text-center">
                                <div className="bg-primary bg-opacity-10 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4">
                                    <i className="fas fa-shield-alt text-3xl text-primary"></i>
                                </div>
                                <h3 className="text-xl font-semibold mb-2">品質保證</h3>
                                <p className="text-gray-600">嚴選優質商品</p>
                            </div>
                            
                            <div className="text-center">
                                <div className="bg-primary bg-opacity-10 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4">
                                    <i className="fas fa-headset text-3xl text-primary"></i>
                                </div>
                                <h3 className="text-xl font-semibold mb-2">貼心客服</h3>
                                <p className="text-gray-600">專業團隊隨時服務</p>
                            </div>
                        </div>
                    </section>
                    
                    {/* Chatbot - 只在首頁顯示 */}
                    <Chatbot />
                </div>
            );
        };
        
        // 所有商品頁
        const ProductsPage = () => {
            const { navigate } = useApp();
            const [products, setProducts] = useState([]);
            const [categories, setCategories] = useState([]);
            const [loading, setLoading] = useState(true);
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [sortBy, setSortBy] = useState('');
            
            useEffect(() => {
                loadData();
            }, []);
            
            useEffect(() => {
                filterProducts();
            }, [selectedCategory, sortBy]);
            
            const loadData = async () => {
                const [productsData, categoriesData] = await Promise.all([
                    DataService.getProducts(),
                    DataService.getCategories()
                ]);
                setProducts(productsData);
                setCategories(categoriesData);
                setLoading(false);
            };
            
            const filterProducts = async () => {
                setLoading(true);
                const filtered = await DataService.getProducts({
                    category: selectedCategory,
                    sortBy: sortBy
                });
                setProducts(filtered);
                setLoading(false);
            };
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <h1 className="text-3xl font-bold mb-8">所有商品</h1>
                    
                    <div className="flex flex-col md:flex-row gap-8">
                        {/* Filters Sidebar */}
                        <div className="md:w-64">
                            <div className="bg-white rounded-lg shadow-md p-6 sticky top-24">
                                <h3 className="font-semibold text-lg mb-4">商品分類</h3>
                                <div className="space-y-2">
                                    {categories.map(category => (
                                        <button
                                            key={category.id}
                                            onClick={() => setSelectedCategory(category.id)}
                                            className={`w-full text-left px-4 py-2 rounded-lg transition ${
                                                selectedCategory === category.id 
                                                    ? 'bg-primary text-white' 
                                                    : 'hover:bg-gray-100'
                                            }`}
                                        >
                                            <i className={`fas ${category.icon} mr-2`}></i>
                                            {category.name}
                                        </button>
                                    ))}
                                </div>
                                
                                <h3 className="font-semibold text-lg mb-4 mt-8">排序方式</h3>
                                <select 
                                    value={sortBy}
                                    onChange={(e) => setSortBy(e.target.value)}
                                    className="w-full px-4 py-2 border rounded-lg text-base"
                                >
                                    <option value="">預設排序</option>
                                    <option value="price-asc">價格：低到高</option>
                                    <option value="price-desc">價格：高到低</option>
                                    <option value="rating">評分最高</option>
                                    <option value="sales">最熱銷</option>
                                </select>
                            </div>
                        </div>
                        
                        {/* Products Grid */}
                        <div className="flex-1">
                            {loading ? (
                                <Loading />
                            ) : products.length === 0 ? (
                                <div className="text-center py-20">
                                    <i className="fas fa-box-open text-6xl text-gray-300 mb-4"></i>
                                    <p className="text-gray-500">沒有找到商品</p>
                                </div>
                            ) : (
                                <>
                                    <div className="mb-4 text-gray-600">
                                        找到 {products.length} 件商品
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        {products.map(product => (
                                            <ProductCard key={product.id} product={product} />
                                        ))}
                                    </div>
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        };
        
        // 商品詳情頁
        const ProductDetailPage = () => {
            const { pageData, addToCart, toggleFavorite, isFavorited, navigate } = useApp();
            const [product, setProduct] = useState(null);
            const [quantity, setQuantity] = useState(1);
            const [loading, setLoading] = useState(true);
            const [relatedProducts, setRelatedProducts] = useState([]);
            
            useEffect(() => {
                loadProduct();
            }, [pageData.productId]);
            
            const loadProduct = async () => {
                setLoading(true);
                const productData = await DataService.getProduct(pageData.productId);
                setProduct(productData);
                
                // 載入相關商品
                const related = await DataService.getProducts({ 
                    category: productData.category 
                });
                setRelatedProducts(related.filter(p => p.id !== productData.id).slice(0, 4));
                
                setLoading(false);
            };
            
            if (loading) return <Loading />;
            if (!product) return <div className="container mx-auto px-4 py-8">找不到商品</div>;
            
            const favorited = isFavorited(product.id);
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    {/* Breadcrumb */}
                    <div className="text-sm text-gray-600 mb-6">
                        <span onClick={() => navigate('home')} className="cursor-pointer hover:text-primary">首頁</span>
                        <span className="mx-2">/</span>
                        <span onClick={() => navigate('products')} className="cursor-pointer hover:text-primary">所有商品</span>
                        <span className="mx-2">/</span>
                        <span>{product.name}</span>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
                        {/* Product Image */}
                        <div>
                            <img 
                                src={product.image} 
                                alt={product.name}
                                className="w-full rounded-lg shadow-lg"
                            />
                        </div>
                        
                        {/* Product Info */}
                        <div>
                            <h1 className="text-3xl font-bold mb-4">{product.name}</h1>
                            
                            <div className="flex items-center mb-4">
                                <div className="flex text-warning">
                                    {[...Array(5)].map((_, i) => (
                                        <i key={i} className={`fas fa-star ${i < Math.floor(product.rating) ? '' : 'text-gray-300'}`}></i>
                                    ))}
                                </div>
                                <span className="text-gray-600 ml-2">({product.rating})</span>
                                <span className="text-gray-600 ml-4">已售出 {product.sales} 件</span>
                            </div>
                            
                            <div className="text-4xl font-bold text-primary mb-6">
                                HK$ {product.price}
                            </div>
                            
                            <p className="text-gray-700 mb-6 leading-relaxed">
                                {product.description}
                            </p>
                            
                            <div className="mb-6">
                                <span className="text-gray-700">庫存：</span>
                                <span className={`font-semibold ${product.stock < 10 ? 'text-secondary' : 'text-green-600'}`}>
                                    {product.stock} 件
                                </span>
                            </div>
                            
                            {/* Quantity Selector */}
                            <div className="mb-6">
                                <label className="block text-gray-700 mb-2">數量</label>
                                <div className="flex items-center space-x-4">
                                    <button 
                                        onClick={() => setQuantity(Math.max(1, quantity - 1))}
                                        className="w-10 h-10 border rounded-lg hover:bg-gray-100"
                                    >
                                        <i className="fas fa-minus"></i>
                                    </button>
                                    <input 
                                        type="number" 
                                        value={quantity}
                                        onChange={(e) => setQuantity(Math.max(1, parseInt(e.target.value) || 1))}
                                        className="w-20 text-center border rounded-lg py-2 text-base"
                                        min="1"
                                        max={product.stock}
                                    />
                                    <button 
                                        onClick={() => setQuantity(Math.min(product.stock, quantity + 1))}
                                        className="w-10 h-10 border rounded-lg hover:bg-gray-100"
                                    >
                                        <i className="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            
                            {/* Action Buttons */}
                            <div className="flex space-x-4 mb-6">
                                <button 
                                    onClick={() => addToCart(product, quantity)}
                                    className="btn-primary flex-1 bg-primary text-white py-3 rounded-lg font-semibold hover:bg-opacity-90"
                                >
                                    <i className="fas fa-cart-plus mr-2"></i>
                                    加入購物車
                                </button>
                                <button 
                                    onClick={() => toggleFavorite(product)}
                                    className={`w-14 h-14 border-2 rounded-lg ${favorited ? 'border-secondary text-secondary' : 'border-gray-300 text-gray-600'} hover:scale-110 transition`}
                                >
                                    <i className="fas fa-heart text-xl"></i>
                                </button>
                            </div>
                            
                            <button 
                                onClick={() => {
                                    addToCart(product, quantity);
                                    navigate('checkout');
                                }}
                                className="w-full bg-secondary text-white py-3 rounded-lg font-semibold hover:bg-opacity-90"
                            >
                                立即購買
                            </button>
                        </div>
                    </div>
                    
                    {/* Related Products */}
                    {relatedProducts.length > 0 && (
                        <section className="mt-16">
                            <h2 className="text-2xl font-bold mb-6">相關商品</h2>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                {relatedProducts.map(p => (
                                    <ProductCard key={p.id} product={p} />
                                ))}
                            </div>
                        </section>
                    )}
                </div>
            );
        };
        
        // 分類頁面
        const CategoryPage = () => {
            const { pageData, navigate } = useApp();
            const [products, setProducts] = useState([]);
            const [category, setCategory] = useState(null);
            const [loading, setLoading] = useState(true);
            
            useEffect(() => {
                loadData();
            }, [pageData.category]);
            
            const loadData = async () => {
                setLoading(true);
                const [productsData, categoriesData] = await Promise.all([
                    DataService.getProducts({ category: pageData.category }),
                    DataService.getCategories()
                ]);
                setProducts(productsData);
                setCategory(categoriesData.find(c => c.id === pageData.category));
                setLoading(false);
            };
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <div className="text-sm text-gray-600 mb-6">
                        <span onClick={() => navigate('home')} className="cursor-pointer hover:text-primary">首頁</span>
                        <span className="mx-2">/</span>
                        <span>{category?.name}</span>
                    </div>
                    
                    <div className="mb-8">
                        <h1 className="text-3xl font-bold flex items-center">
                            {category && <i className={`fas ${category.icon} mr-3 text-primary`}></i>}
                            {category?.name}
                        </h1>
                    </div>
                    
                    {loading ? (
                        <Loading />
                    ) : (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            {products.map(product => (
                                <ProductCard key={product.id} product={product} />
                            ))}
                        </div>
                    )}
                </div>
            );
        };
        
        // 購物車頁
        const CartPage = () => {
            const { cart, updateCartQuantity, removeFromCart, cartTotal, navigate } = useApp();
            
            const shippingFee = cartTotal >= 500 ? 0 : 60;
            const total = cartTotal + shippingFee;
            
            if (cart.length === 0) {
                return (
                    <div className="container mx-auto px-4 py-20 text-center animate-fade-in">
                        <i className="fas fa-shopping-cart text-6xl text-gray-300 mb-4"></i>
                        <h2 className="text-2xl font-semibold mb-4">購物車是空的</h2>
                        <p className="text-gray-600 mb-8">快去選購喜歡的商品吧！</p>
                        <button 
                            onClick={() => navigate('products')}
                            className="btn-primary bg-primary text-white px-8 py-3 rounded-lg"
                        >
                            開始購物
                        </button>
                    </div>
                );
            }
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <h1 className="text-3xl font-bold mb-8">購物車</h1>
                    
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        {/* Cart Items */}
                        <div className="lg:col-span-2">
                            <div className="bg-white rounded-lg shadow-md">
                                {cart.map(item => (
                                    <div key={item.id} className="flex items-center p-6 border-b last:border-b-0">
                                        <img 
                                            src={item.image} 
                                            alt={item.name}
                                            className="w-24 h-24 object-cover rounded-lg cursor-pointer"
                                            onClick={() => navigate('product-detail', { productId: item.id })}
                                        />
                                        
                                        <div className="flex-1 ml-6">
                                            <h3 
                                                className="font-semibold text-lg mb-2 cursor-pointer hover:text-primary"
                                                onClick={() => navigate('product-detail', { productId: item.id })}
                                            >
                                                {item.name}
                                            </h3>
                                            <p className="text-gray-600 mb-2">{item.description}</p>
                                            <p className="text-primary font-bold text-xl">HK$ {item.price}</p>
                                        </div>
                                        
                                        <div className="flex items-center space-x-6">
                                            <div className="flex items-center space-x-2">
                                                <button 
                                                    onClick={() => updateCartQuantity(item.id, item.quantity - 1)}
                                                    className="w-8 h-8 border rounded hover:bg-gray-100"
                                                >
                                                    <i className="fas fa-minus text-sm"></i>
                                                </button>
                                                <span className="w-12 text-center font-semibold">{item.quantity}</span>
                                                <button 
                                                    onClick={() => updateCartQuantity(item.id, item.quantity + 1)}
                                                    className="w-8 h-8 border rounded hover:bg-gray-100"
                                                >
                                                    <i className="fas fa-plus text-sm"></i>
                                                </button>
                                            </div>
                                            
                                            <button 
                                                onClick={() => removeFromCart(item.id)}
                                                className="text-secondary hover:text-red-700"
                                            >
                                                <i className="fas fa-trash text-xl"></i>
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                        
                        {/* Order Summary */}
                        <div>
                            <div className="bg-white rounded-lg shadow-md p-6 sticky top-24">
                                <h2 className="text-xl font-bold mb-6">訂單摘要</h2>
                                
                                <div className="space-y-4 mb-6">
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">小計</span>
                                        <span className="font-semibold">HK$ {cartTotal}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">運費</span>
                                        <span className="font-semibold">
                                            {shippingFee === 0 ? '免運' : `HK$ ${shippingFee}`}
                                        </span>
                                    </div>
                                    {cartTotal < 500 && (
                                        <p className="text-sm text-gray-500">
                                            再買 HK$ {500 - cartTotal} 即可免運
                                        </p>
                                    )}
                                    <div className="border-t pt-4 flex justify-between text-xl">
                                        <span className="font-bold">總計</span>
                                        <span className="font-bold text-primary">HK$ {total}</span>
                                    </div>
                                </div>
                                
                                <button 
                                    onClick={() => navigate('checkout')}
                                    className="btn-primary w-full bg-primary text-white py-3 rounded-lg font-semibold"
                                >
                                    前往結帳
                                </button>
                                
                                <button 
                                    onClick={() => navigate('products')}
                                    className="w-full mt-3 border-2 border-primary text-primary py-3 rounded-lg font-semibold hover:bg-primary hover:text-white transition"
                                >
                                    繼續購物
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // 結帳頁
        const CheckoutPage = () => {
            const { cart, cartTotal, user, navigate, clearCart, showToast } = useApp();
            const [formData, setFormData] = useState({
                name: user?.name || '',
                email: user?.email || '',
                phone: user?.phone || '',
                address: '',
                payment: 'credit',
                note: ''
            });
            const [submitting, setSubmitting] = useState(false);
            
            const shippingFee = cartTotal >= 500 ? 0 : 60;
            const total = cartTotal + shippingFee;
            
            if (cart.length === 0) {
                return (
                    <div className="container mx-auto px-4 py-20 text-center">
                        <p className="text-xl mb-4">購物車是空的</p>
                        <button 
                            onClick={() => navigate('products')}
                            className="btn-primary bg-primary text-white px-8 py-3 rounded-lg"
                        >
                            開始購物
                        </button>
                    </div>
                );
            }
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                
                if (!formData.name || !formData.email || !formData.phone || !formData.address) {
                    showToast('請填寫所有必填欄位', 'error');
                    return;
                }
                
                setSubmitting(true);
                
                const orderData = {
                    items: cart,
                    customer: formData,
                    subtotal: cartTotal,
                    shipping: shippingFee,
                    total: total
                };
                
                const result = await DataService.submitOrder(orderData);
                
                if (result.success) {
                    clearCart();
                    navigate('order-confirm', { order: result.order });
                } else {
                    showToast('訂單提交失敗，請稍後再試', 'error');
                }
                
                setSubmitting(false);
            };
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <h1 className="text-3xl font-bold mb-8">結帳</h1>
                    
                    <form onSubmit={handleSubmit}>
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Customer Info */}
                            <div className="lg:col-span-2">
                                <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                                    <h2 className="text-xl font-bold mb-6">收件資訊</h2>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-gray-700 mb-2">姓名 *</label>
                                            <input 
                                                type="text"
                                                value={formData.name}
                                                onChange={(e) => setFormData({...formData, name: e.target.value})}
                                                className="w-full px-4 py-2 border rounded-lg text-base"
                                                required
                                            />
                                        </div>
                                        
                                        <div>
                                            <label className="block text-gray-700 mb-2">Email *</label>
                                            <input 
                                                type="email"
                                                value={formData.email}
                                                onChange={(e) => setFormData({...formData, email: e.target.value})}
                                                className="w-full px-4 py-2 border rounded-lg text-base"
                                                required
                                            />
                                        </div>
                                        
                                        <div>
                                            <label className="block text-gray-700 mb-2">電話 *</label>
                                            <input 
                                                type="tel"
                                                value={formData.phone}
                                                onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                                className="w-full px-4 py-2 border rounded-lg text-base"
                                                required
                                            />
                                        </div>
                                        
                                        <div className="md:col-span-2">
                                            <label className="block text-gray-700 mb-2">地址 *</label>
                                            <input 
                                                type="text"
                                                value={formData.address}
                                                onChange={(e) => setFormData({...formData, address: e.target.value})}
                                                className="w-full px-4 py-2 border rounded-lg text-base"
                                                required
                                            />
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                                    <h2 className="text-xl font-bold mb-6">付款方式</h2>
                                    
                                    <div className="space-y-3">
                                        <label className="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50">
                                            <input 
                                                type="radio"
                                                name="payment"
                                                value="credit"
                                                checked={formData.payment === 'credit'}
                                                onChange={(e) => setFormData({...formData, payment: e.target.value})}
                                                className="mr-3"
                                            />
                                            <i className="fas fa-credit-card mr-3 text-primary"></i>
                                            <span>信用卡</span>
                                        </label>
                                        
                                        <label className="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50">
                                            <input 
                                                type="radio"
                                                name="payment"
                                                value="atm"
                                                checked={formData.payment === 'atm'}
                                                onChange={(e) => setFormData({...formData, payment: e.target.value})}
                                                className="mr-3"
                                            />
                                            <i className="fas fa-university mr-3 text-primary"></i>
                                            <span>Alipay / Payme / WeChat Pay</span>
                                        </label>
                                        
                                        <label className="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50">
                                            <input 
                                                type="radio"
                                                name="payment"
                                                value="cod"
                                                checked={formData.payment === 'cod'}
                                                onChange={(e) => setFormData({...formData, payment: e.target.value})}
                                                className="mr-3"
                                            />
                                            <i className="fas fa-money-bill-wave mr-3 text-primary"></i>
                                            <span>貨到付款</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div className="bg-white rounded-lg shadow-md p-6">
                                    <h2 className="text-xl font-bold mb-6">備註</h2>
                                    <textarea 
                                        value={formData.note}
                                        onChange={(e) => setFormData({...formData, note: e.target.value})}
                                        className="w-full px-4 py-2 border rounded-lg text-base"
                                        rows="4"
                                        placeholder="有什麼想告訴我們的嗎？"
                                    ></textarea>
                                </div>
                            </div>
                            
                            {/* Order Summary */}
                            <div>
                                <div className="bg-white rounded-lg shadow-md p-6 sticky top-24">
                                    <h2 className="text-xl font-bold mb-6">訂單摘要</h2>
                                    
                                    <div className="space-y-4 mb-6 max-h-64 overflow-y-auto">
                                        {cart.map(item => (
                                            <div key={item.id} className="flex items-center space-x-3">
                                                <img src={item.image} alt={item.name} className="w-16 h-16 object-cover rounded" />
                                                <div className="flex-1">
                                                    <p className="font-semibold text-sm">{item.name}</p>
                                                    <p className="text-gray-600 text-sm">x {item.quantity}</p>
                                                </div>
                                                <span className="font-semibold">HK$ {item.price * item.quantity}</span>
                                            </div>
                                        ))}
                                    </div>
                                    
                                    <div className="border-t pt-4 space-y-3 mb-6">
                                        <div className="flex justify-between">
                                            <span className="text-gray-600">小計</span>
                                            <span className="font-semibold">HK$ {cartTotal}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className="text-gray-600">運費</span>
                                            <span className="font-semibold">
                                                {shippingFee === 0 ? '免運' : `HK$ ${shippingFee}`}
                                            </span>
                                        </div>
                                        <div className="flex justify-between text-xl font-bold border-t pt-3">
                                            <span>總計</span>
                                            <span className="text-primary">HK$ {total}</span>
                                        </div>
                                    </div>
                                    
                                    <button 
                                        type="submit"
                                        disabled={submitting}
                                        className="btn-primary w-full bg-primary text-white py-3 rounded-lg font-semibold disabled:opacity-50"
                                    >
                                        {submitting ? (
                                            <>
                                                <i className="fas fa-spinner fa-spin mr-2"></i>
                                                處理中...
                                            </>
                                        ) : (
                                            '確認訂單'
                                        )}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            );
        };
        
        // 訂單確認頁
        const OrderConfirmPage = () => {
            const { pageData, navigate } = useApp();
            const order = pageData.order;
            
            if (!order) {
                return (
                    <div className="container mx-auto px-4 py-20 text-center">
                        <p className="text-xl mb-4">找不到訂單資訊</p>
                        <button 
                            onClick={() => navigate('home')}
                            className="btn-primary bg-primary text-white px-8 py-3 rounded-lg"
                        >
                            返回首頁
                        </button>
                    </div>
                );
            }
            
            const paymentMethods = {
                credit: '信用卡',
                atm: 'ATM 轉帳',
                cod: '貨到付款'
            };
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <div className="max-w-3xl mx-auto">
                        <div className="bg-white rounded-lg shadow-md p-8 text-center mb-8">
                            <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i className="fas fa-check text-4xl text-green-600"></i>
                            </div>
                            <h1 className="text-3xl font-bold mb-2">訂單已確認！</h1>
                            <p className="text-gray-600 mb-4">感謝您的購買</p>
                            <p className="text-lg">訂單編號：<span className="font-semibold text-primary">{order.id}</span></p>
                        </div>
                        
                        <div className="bg-white rounded-lg shadow-md p-8 mb-8">
                            <h2 className="text-xl font-bold mb-6">訂單詳情</h2>
                            
                            <div className="space-y-4 mb-6">
                                {order.items.map(item => (
                                    <div key={item.id} className="flex items-center justify-between border-b pb-4">
                                        <div className="flex items-center">
                                            <img src={item.image} alt={item.name} className="w-16 h-16 object-cover rounded mr-4" />
                                            <div>
                                                <p className="font-semibold">{item.name}</p>
                                                <p className="text-gray-600 text-sm">x {item.quantity}</p>
                                            </div>
                                        </div>
                                        <span className="font-semibold">HK$ {item.price * item.quantity}</span>
                                    </div>
                                ))}
                            </div>
                            
                            <div className="border-t pt-4 space-y-2">
                                <div className="flex justify-between">
                                    <span className="text-gray-600">小計</span>
                                    <span>NT$ {order.subtotal}</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-gray-600">運費</span>
                                    <span>{order.shipping === 0 ? '免運' : `HK$ ${order.shipping}`}</span>
                                </div>
                                <div className="flex justify-between text-xl font-bold border-t pt-2">
                                    <span>總計</span>
                                    <span className="text-primary">HK$ {order.total}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div className="bg-white rounded-lg shadow-md p-8 mb-8">
                            <h2 className="text-xl font-bold mb-6">收件資訊</h2>
                            <div className="space-y-2">
                                <p><span className="text-gray-600">姓名：</span>{order.customer.name}</p>
                                <p><span className="text-gray-600">Email：</span>{order.customer.email}</p>
                                <p><span className="text-gray-600">電話：</span>{order.customer.phone}</p>
                                <p><span className="text-gray-600">地址：</span>{order.customer.address}</p>
                                <p><span className="text-gray-600">付款方式：</span>{paymentMethods[order.customer.payment]}</p>
                            </div>
                        </div>
                        
                        <div className="flex space-x-4">
                            <button 
                                onClick={() => navigate('orders')}
                                className="flex-1 bg-primary text-white py-3 rounded-lg font-semibold hover:bg-opacity-90"
                            >
                                查看訂單
                            </button>
                            <button 
                                onClick={() => navigate('home')}
                                className="flex-1 border-2 border-primary text-primary py-3 rounded-lg font-semibold hover:bg-primary hover:text-white transition"
                            >
                                返回首頁
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // 登入/註冊頁
        const LoginPage = () => {
            const { login, register, navigate, user } = useApp();
            const [isLogin, setIsLogin] = useState(true);
            const [formData, setFormData] = useState({
                name: '',
                email: '',
                password: '',
                phone: ''
            });
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            
            // 如果已登入，重定向到會員中心
            useEffect(() => {
                if (user) {
                    navigate('profile');
                }
            }, [user]);
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setLoading(true);
                
                try {
                    if (isLogin) {
                        const result = await login(formData.email, formData.password);
                        if (!result.success) {
                            setError(result.message);
                        } else {
                            navigate('profile');
                        }
                    } else {
                        if (!formData.name || !formData.phone) {
                            setError('請填寫所有欄位');
                            setLoading(false);
                            return;
                        }
                        const result = await register(formData);
                        if (result.success) {
                            navigate('profile');
                        }
                    }
                } catch (err) {
                    setError('發生錯誤，請稍後再試');
                }
                
                setLoading(false);
            };
            
            return (
                <div className="container mx-auto px-4 py-12 animate-fade-in">
                    <div className="max-w-md mx-auto bg-white rounded-lg shadow-md p-8">
                        <h1 className="text-3xl font-bold text-center mb-8">
                            {isLogin ? '會員登入' : '會員註冊'}
                        </h1>
                        
                        {error && (
                            <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                                {error}
                            </div>
                        )}
                        
                        <form onSubmit={handleSubmit} className="space-y-4">
                            {!isLogin && (
                                <div>
                                    <label className="block text-gray-700 mb-2">姓名</label>
                                    <input 
                                        type="text"
                                        value={formData.name}
                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                        className="w-full px-4 py-2 border rounded-lg text-base"
                                        required={!isLogin}
                                    />
                                </div>
                            )}
                            
                            <div>
                                <label className="block text-gray-700 mb-2">Email</label>
                                <input 
                                    type="email"
                                    value={formData.email}
                                    onChange={(e) => setFormData({...formData, email: e.target.value})}
                                    className="w-full px-4 py-2 border rounded-lg text-base"
                                    required
                                />
                            </div>
                            
                            <div>
                                <label className="block text-gray-700 mb-2">密碼</label>
                                <input 
                                    type="password"
                                    value={formData.password}
                                    onChange={(e) => setFormData({...formData, password: e.target.value})}
                                    className="w-full px-4 py-2 border rounded-lg text-base"
                                    required
                                />
                            </div>
                            
                            {!isLogin && (
                                <div>
                                    <label className="block text-gray-700 mb-2">電話</label>
                                    <input 
                                        type="tel"
                                        value={formData.phone}
                                        onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                        className="w-full px-4 py-2 border rounded-lg text-base"
                                        required={!isLogin}
                                    />
                                </div>
                            )}
                            
                            <button 
                                type="submit"
                                disabled={loading}
                                className="btn-primary w-full bg-primary text-white py-3 rounded-lg font-semibold disabled:opacity-50"
                            >
                                {loading ? (
                                    <>
                                        <i className="fas fa-spinner fa-spin mr-2"></i>
                                        處理中...
                                    </>
                                ) : (
                                    isLogin ? '登入' : '註冊'
                                )}
                            </button>
                        </form>
                        
                        <div className="mt-6 text-center">
                            <button 
                                onClick={() => {
                                    setIsLogin(!isLogin);
                                    setError('');
                                }}
                                className="text-primary hover:underline"
                            >
                                {isLogin ? '還沒有帳號？立即註冊' : '已有帳號？立即登入'}
                            </button>
                        </div>
                        
                        {isLogin && (
                            <div className="mt-4 p-4 bg-blue-50 rounded-lg">
                                <p className="text-sm text-gray-600">
                                    <i className="fas fa-info-circle mr-2"></i>
                                    提示：輸入任意 Email 和密碼即可登入
                                </p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };
        
        // 會員中心頁
        const ProfilePage = () => {
            const { user, navigate, logout } = useApp();
            
            if (!user) {
                return (
                    <div className="container mx-auto px-4 py-20 text-center">
                        <p className="text-xl mb-4">請先登入</p>
                        <button 
                            onClick={() => navigate('login')}
                            className="btn-primary bg-primary text-white px-8 py-3 rounded-lg"
                        >
                            前往登入
                        </button>
                    </div>
                );
            }
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <h1 className="text-3xl font-bold mb-8">會員中心</h1>
                    
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div className="md:col-span-1">
                            <div className="bg-white rounded-lg shadow-md p-6">
                                <div className="text-center mb-6">
                                    <div className="w-24 h-24 bg-primary bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <i className="fas fa-user text-4xl text-primary"></i>
                                    </div>
                                    <h2 className="text-xl font-bold">{user.name}</h2>
                                    <p className="text-gray-600">{user.email}</p>
                                </div>
                                
                                <div className="space-y-2">
                                    <div className="flex items-center justify-between p-3 bg-gray-50 rounded">
                                        <span className="text-gray-600">會員點數</span>
                                        <span className="font-semibold text-primary">{user.points} 點</span>
                                    </div>
                                    <div className="flex items-center justify-between p-3 bg-gray-50 rounded">
                                        <span className="text-gray-600">加入日期</span>
                                        <span className="font-semibold">{user.joinDate}</span>
                                    </div>
                                </div>
                                
                                <button 
                                    onClick={logout}
                                    className="w-full mt-6 border-2 border-secondary text-secondary py-2 rounded-lg hover:bg-secondary hover:text-white transition"
                                >
                                    <i className="fas fa-sign-out-alt mr-2"></i>
                                    登出
                                </button>
                            </div>
                        </div>
                        
                        <div className="md:col-span-2">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div 
                                    onClick={() => navigate('orders')}
                                    className="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition"
                                >
                                    <div className="flex items-center mb-4">
                                        <div className="w-12 h-12 bg-primary bg-opacity-10 rounded-full flex items-center justify-center mr-4">
                                            <i className="fas fa-shopping-bag text-2xl text-primary"></i>
                                        </div>
                                        <h3 className="text-xl font-semibold">我的訂單</h3>
                                    </div>
                                    <p className="text-gray-600">查看訂單狀態與歷史紀錄</p>
                                </div>
                                
                                <div 
                                    onClick={() => navigate('favorites')}
                                    className="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition"
                                >
                                    <div className="flex items-center mb-4">
                                        <div className="w-12 h-12 bg-secondary bg-opacity-10 rounded-full flex items-center justify-center mr-4">
                                            <i className="fas fa-heart text-2xl text-secondary"></i>
                                        </div>
                                        <h3 className="text-xl font-semibold">我的收藏</h3>
                                    </div>
                                    <p className="text-gray-600">管理您喜愛的商品</p>
                                </div>
                                
                                <div 
                                    onClick={() => navigate('cart')}
                                    className="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition"
                                >
                                    <div className="flex items-center mb-4">
                                        <div className="w-12 h-12 bg-accent bg-opacity-10 rounded-full flex items-center justify-center mr-4">
                                            <i className="fas fa-shopping-cart text-2xl text-accent"></i>
                                        </div>
                                        <h3 className="text-xl font-semibold">購物車</h3>
                                    </div>
                                    <p className="text-gray-600">查看購物車內的商品</p>
                                </div>
                                
                                <div className="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                                    <div className="flex items-center mb-4">
                                        <div className="w-12 h-12 bg-warning bg-opacity-10 rounded-full flex items-center justify-center mr-4">
                                            <i className="fas fa-cog text-2xl text-warning"></i>
                                        </div>
                                        <h3 className="text-xl font-semibold">帳號設定</h3>
                                    </div>
                                    <p className="text-gray-600">修改個人資料與密碼</p>
                                </div>
                            </div>
                            
                            <div className="bg-gradient-to-r from-primary to-purple-600 rounded-lg p-6 mt-6 text-white">
                                <h3 className="text-xl font-bold mb-2">會員專屬優惠</h3>
                                <p className="mb-4">累積點數享更多折扣！</p>
                                <button 
                                    onClick={() => navigate('promotions')}
                                    className="bg-white text-primary px-6 py-2 rounded-lg font-semibold hover:bg-opacity-90"
                                >
                                    查看優惠
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // 訂單歷史頁
        const OrdersPage = () => {
            const { user, navigate } = useApp();
            const [orders, setOrders] = useState([]);
            const [loading, setLoading] = useState(true);
            
            useEffect(() => {
                if (!user) {
                    navigate('login');
                    return;
                }
                loadOrders();
            }, [user]);
            
            const loadOrders = async () => {
                setLoading(true);
                const ordersData = await DataService.getOrders();
                setOrders(ordersData);
                setLoading(false);
            };
            
            const statusColors = {
                pending: 'bg-yellow-100 text-yellow-800',
                processing: 'bg-blue-100 text-blue-800',
                shipped: 'bg-purple-100 text-purple-800',
                delivered: 'bg-green-100 text-green-800',
                cancelled: 'bg-red-100 text-red-800'
            };
            
            const statusTexts = {
                pending: '處理中',
                processing: '準備出貨',
                shipped: '已出貨',
                delivered: '已送達',
                cancelled: '已取消'
            };
            
            if (!user) return null;
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <h1 className="text-3xl font-bold mb-8">訂單查詢</h1>
                    
                    {loading ? (
                        <Loading />
                    ) : orders.length === 0 ? (
                        <div className="text-center py-20">
                            <i className="fas fa-box-open text-6xl text-gray-300 mb-4"></i>
                            <p className="text-gray-500 mb-8">您還沒有任何訂單</p>
                            <button 
                                onClick={() => navigate('products')}
                                className="btn-primary bg-primary text-white px-8 py-3 rounded-lg"
                            >
                                開始購物
                            </button>
                        </div>
                    ) : (
                        <div className="space-y-6">
                            {orders.map(order => (
                                <div key={order.id} className="bg-white rounded-lg shadow-md overflow-hidden">
                                    <div className="bg-gray-50 px-6 py-4 flex items-center justify-between">
                                        <div>
                                            <span className="text-gray-600">訂單編號：</span>
                                            <span className="font-semibold">{order.id}</span>
                                        </div>
                                        <div>
                                            <span className="text-gray-600 mr-4">
                                                {new Date(order.date).toLocaleDateString('zh-TW')}
                                            </span>
                                            <span className={`px-3 py-1 rounded-full text-sm ${statusColors[order.status]}`}>
                                                {statusTexts[order.status]}
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div className="p-6">
                                        <div className="space-y-4 mb-4">
                                            {order.items.map(item => (
                                                <div key={item.id} className="flex items-center">
                                                    <img src={item.image} alt={item.name} className="w-16 h-16 object-cover rounded mr-4" />
                                                    <div className="flex-1">
                                                        <p className="font-semibold">{item.name}</p>
                                                        <p className="text-gray-600 text-sm">x {item.quantity}</p>
                                                    </div>
                                                    <span className="font-semibold">HK$ {item.price * item.quantity}</span>
                                                </div>
                                            ))}
                                        </div>
                                        
                                        <div className="border-t pt-4 flex items-center justify-between">
                                            <div className="text-xl font-bold">
                                                總計：<span className="text-primary">HK$ {order.total}</span>
                                            </div>
                                            <button 
                                                onClick={() => navigate('order-detail', { orderId: order.id })}
                                                className="text-primary hover:underline"
                                            >
                                            查看詳情 <i className="fas fa-arrow-right ml-2"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };
        
        // 訂單詳情頁
        const OrderDetailPage = () => {
            const { pageData, navigate } = useApp();
            const [order, setOrder] = useState(null);
            const [loading, setLoading] = useState(true);
            
            useEffect(() => {
                loadOrder();
            }, [pageData.orderId]);
            
            const loadOrder = async () => {
                setLoading(true);
                const orderData = await DataService.getOrder(pageData.orderId);
                setOrder(orderData);
                setLoading(false);
            };
            
            if (loading) return <Loading />;
            if (!order) return (
                <div className="container mx-auto px-4 py-20 text-center">
                    <p className="text-xl mb-4">找不到訂單</p>
                    <button 
                        onClick={() => navigate('orders')}
                        className="btn-primary bg-primary text-white px-8 py-3 rounded-lg"
                    >
                        返回訂單列表
                    </button>
                </div>
            );
            
            const paymentMethods = {
                credit: '信用卡',
                atm: 'ATM 轉帳',
                cod: '貨到付款'
            };
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <div className="mb-6">
                        <button 
                            onClick={() => navigate('orders')}
                            className="text-primary hover:underline"
                        >
                            <i className="fas fa-arrow-left mr-2"></i>
                            返回訂單列表
                        </button>
                    </div>
                    
                    <h1 className="text-3xl font-bold mb-8">訂單詳情</h1>
                    
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2">
                            <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                                <h2 className="text-xl font-bold mb-6">訂單商品</h2>
                                <div className="space-y-4">
                                    {order.items.map(item => (
                                        <div key={item.id} className="flex items-center border-b pb-4 last:border-b-0">
                                            <img src={item.image} alt={item.name} className="w-20 h-20 object-cover rounded mr-4" />
                                            <div className="flex-1">
                                                <p className="font-semibold">{item.name}</p>
                                                <p className="text-gray-600">x {item.quantity}</p>
                                            </div>
                                            <span className="font-semibold">HK$ {item.price * item.quantity}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            <div className="bg-white rounded-lg shadow-md p-6">
                                <h2 className="text-xl font-bold mb-6">收件資訊</h2>
                                <div className="space-y-2">
                                    <p><span className="text-gray-600">姓名：</span>{order.customer.name}</p>
                                    <p><span className="text-gray-600">Email：</span>{order.customer.email}</p>
                                    <p><span className="text-gray-600">電話：</span>{order.customer.phone}</p>
                                    <p><span className="text-gray-600">地址：</span>{order.customer.address}</p>
                                    <p><span className="text-gray-600">付款方式：</span>{paymentMethods[order.customer.payment]}</p>
                                    {order.customer.note && (
                                        <p><span className="text-gray-600">備註：</span>{order.customer.note}</p>
                                    )}
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <div className="bg-white rounded-lg shadow-md p-6 sticky top-24">
                                <h2 className="text-xl font-bold mb-6">訂單資訊</h2>
                                
                                <div className="space-y-3 mb-6">
                                    <div>
                                        <span className="text-gray-600">訂單編號</span>
                                        <p className="font-semibold">{order.id}</p>
                                    </div>
                                    <div>
                                        <span className="text-gray-600">訂單日期</span>
                                        <p className="font-semibold">{new Date(order.date).toLocaleString('zh-TW')}</p>
                                    </div>
                                    <div>
                                        <span className="text-gray-600">訂單狀態</span>
                                        <p className="font-semibold text-primary">處理中</p>
                                    </div>
                                </div>
                                
                                <div className="border-t pt-4 space-y-2 mb-6">
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">小計</span>
                                        <span>NT$ {order.subtotal}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">運費</span>
                                        <span>{order.shipping === 0 ? '免運' : `HK$ ${order.shipping}`}</span>
                                    </div>
                                    <div className="flex justify-between text-xl font-bold border-t pt-2">
                                        <span>總計</span>
                                        <span className="text-primary">HK$ {order.total}</span>
                                    </div>
                                </div>
                                
                                <button className="w-full bg-primary text-white py-3 rounded-lg font-semibold hover:bg-opacity-90">
                                    聯絡客服
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // 收藏頁
        const FavoritesPage = () => {
            const { favorites, navigate } = useApp();
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <h1 className="text-3xl font-bold mb-8">我的收藏</h1>
                    
                    {favorites.length === 0 ? (
                        <div className="text-center py-20">
                            <i className="fas fa-heart text-6xl text-gray-300 mb-4"></i>
                            <p className="text-gray-500 mb-8">您還沒有收藏任何商品</p>
                            <button 
                                onClick={() => navigate('products')}
                                className="btn-primary bg-primary text-white px-8 py-3 rounded-lg"
                            >
                                開始探索
                            </button>
                        </div>
                    ) : (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            {favorites.map(product => (
                                <ProductCard key={product.id} product={product} />
                            ))}
                        </div>
                    )}
                </div>
            );
        };
        
        // 搜尋頁
        const SearchPage = () => {
            const { navigate } = useApp();
            const [searchTerm, setSearchTerm] = useState('');
            const [results, setResults] = useState([]);
            const [loading, setLoading] = useState(false);
            const [hasSearched, setHasSearched] = useState(false);
            
            const handleSearch = async (e) => {
                e.preventDefault();
                if (!searchTerm.trim()) return;
                
                setLoading(true);
                setHasSearched(true);
                const products = await DataService.getProducts({ search: searchTerm });
                setResults(products);
                setLoading(false);
            };
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <h1 className="text-3xl font-bold mb-8">搜尋商品</h1>
                    
                    <form onSubmit={handleSearch} className="max-w-2xl mx-auto mb-12">
                        <div className="flex">
                            <input 
                                type="text"
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                placeholder="搜尋零食、餅乾、巧克力..."
                                className="flex-1 px-6 py-3 border border-r-0 rounded-l-lg text-base"
                            />
                            <button 
                                type="submit"
                                className="bg-primary text-white px-8 py-3 rounded-r-lg hover:bg-opacity-90"
                            >
                                <i className="fas fa-search"></i>
                            </button>
                        </div>
                    </form>
                    
                    {loading ? (
                        <Loading />
                    ) : hasSearched ? (
                        results.length === 0 ? (
                            <div className="text-center py-20">
                                <i className="fas fa-search text-6xl text-gray-300 mb-4"></i>
                                <p className="text-gray-500">找不到相關商品</p>
                            </div>
                        ) : (
                            <>
                                <p className="text-gray-600 mb-6">找到 {results.length} 件商品</p>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    {results.map(product => (
                                        <ProductCard key={product.id} product={product} />
                                    ))}
                                </div>
                            </>
                        )
                    ) : (
                        <div className="text-center py-20 text-gray-500">
                            <i className="fas fa-search text-6xl text-gray-300 mb-4"></i>
                            <p>輸入關鍵字開始搜尋</p>
                        </div>
                    )}
                </div>
            );
        };
        
        // 優惠活動頁
        const PromotionsPage = () => {
            const [promotions, setPromotions] = useState([]);
            const [loading, setLoading] = useState(true);
            const { navigate } = useApp();
            
            useEffect(() => {
                loadPromotions();
            }, []);
            
            const loadPromotions = async () => {
                const data = await DataService.getPromotions();
                setPromotions(data);
                setLoading(false);
            };
            
            if (loading) return <Loading />;
            
            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <h1 className="text-3xl font-bold mb-8">優惠活動</h1>
                    
                    <div className="space-y-6">
                        {promotions.map(promo => (
                            <div key={promo.id} className="bg-white rounded-lg shadow-md overflow-hidden">
                                <div className="md:flex">
                                    <img 
                                        src={promo.image} 
                                        alt={promo.title}
                                        className="w-full md:w-1/3 h-64 object-cover"
                                    />
                                    <div className="p-6 flex-1">
                                        <h2 className="text-2xl font-bold mb-3">{promo.title}</h2>
                                        <p className="text-gray-600 mb-4">{promo.description}</p>
                                        
                                        <div className="flex flex-wrap gap-4 mb-4">
                                            {promo.discount && (
                                                <div className="flex items-center">
                                                    <i className="fas fa-tag text-primary mr-2"></i>
                                                    <span>
                                                        {promo.type === 'percentage' 
                                                            ? `全館 ${100 - promo.discount}折` 
                                                            : `折扣 HK$ ${promo.discount}`
                                                        }
                                                    </span>
                                                </div>
                                            )}
                                            {promo.minPurchase && (
                                                <div className="flex items-center">
                                                    <i className="fas fa-dollar-sign text-primary mr-2"></i>
                                                    <span>滿 HK$ {promo.minPurchase}</span>
                                                </div>
                                            )}
                                            {promo.freeShipping && (
                                                <div className="flex items-center">
                                                    <i className="fas fa-shipping-fast text-primary mr-2"></i>
                                                    <span>免運費</span>
                                                </div>
                                            )}
                                        </div>
                                        
                                        <div className="flex items-center justify-between">
                                            <span className="text-gray-600">
                                                <i className="fas fa-clock mr-2"></i>
                                                活動至 {promo.endDate}
                                            </span>
                                            <button 
                                                onClick={() => navigate('products')}
                                                className="bg-primary text-white px-6 py-2 rounded-lg hover:bg-opacity-90"
                                            >
                                                立即選購
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };
        
        // 關於我們頁
        const AboutPage = () => {
            const { navigate } = useApp();
            
            return (
                <div className="animate-fade-in">
                    <div className="bg-gradient-to-r from-primary to-purple-600 text-white py-20">
                        <div className="container mx-auto px-4 text-center">
                            <h1 className="text-4xl font-bold mb-4">關於零食天堂</h1>
                            <p className="text-xl">為您帶來最優質的零食體驗</p>
                        </div>
                    </div>
                    
                    <div className="container mx-auto px-4 py-16">
                        <div className="max-w-4xl mx-auto">
                            <section className="mb-16">
                                <h2 className="text-3xl font-bold mb-6">我們的故事</h2>
                                <p className="text-gray-700 leading-relaxed mb-4">
                                    零食天堂成立於2025年，由一群熱愛美食的年輕人創立。我們相信，優質的零食不僅能滿足味蕾，更能為生活帶來小確幸。
                                </p>
                                <p className="text-gray-700 leading-relaxed">
                                    從最初的小小網店，到如今服務數萬名顧客，我們始終堅持「品質第一、顧客至上」的理念，為您精選來自世界各地的優質零食。
                                </p>
                            </section>
                            
                            <section className="mb-16">
                                <h2 className="text-3xl font-bold mb-6">我們的承諾</h2>
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                                    <div className="text-center">
                                        <div className="w-16 h-16 bg-primary bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <i className="fas fa-check-circle text-3xl text-primary"></i>
                                        </div>
                                        <h3 className="text-xl font-semibold mb-2">嚴選品質</h3>
                                        <p className="text-gray-600">每一款商品都經過嚴格篩選</p>
                                    </div>
                                    
                                    <div className="text-center">
                                        <div className="w-16 h-16 bg-primary bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <i className="fas fa-truck text-3xl text-primary"></i>
                                        </div>
                                        <h3 className="text-xl font-semibold mb-2">快速配送</h3>
                                        <p className="text-gray-600">24小時內快速出貨到府</p>
                                    </div>
                                    
                                    <div className="text-center">
                                        <div className="w-16 h-16 bg-primary bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <i className="fas fa-smile text-3xl text-primary"></i>
                                        </div>
                                        <h3 className="text-xl font-semibold mb-2">用心服務</h3>
                                        <p className="text-gray-600">專業客服團隊隨時待命</p>
                                    </div>
                                </div>
                            </section>
                            
                            <section>
                                <h2 className="text-3xl font-bold mb-6">聯絡我們</h2>
                                <div className="bg-gray-50 rounded-lg p-6">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <h3 className="font-semibold mb-2">客服專線</h3>
                                            <p className="text-gray-700">0800-123-456</p>
                                            <p className="text-sm text-gray-600">週一至週日 09:00-21:00</p>
                                        </div>
                                        
                                        <div>
                                            <h3 className="font-semibold mb-2">Email</h3>
                                            <p className="text-gray-700">service@snackheaven.com</p>
                                            <p className="text-sm text-gray-600">24小時內回覆</p>
                                        </div>
                                        
                                        <div>
                                            <h3 className="font-semibold mb-2">門市地址</h3>
                                            <p className="text-gray-700">九龍尖沙咀東科學館道16號華懋廣場UG3樓</p>
                                        </div>
                                        
                                        <div>
                                            <h3 className="font-semibold mb-2">營業時間</h3>
                                            <p className="text-gray-700">週一至週日 10:00-22:00</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Google Map 區塊 */}
                                <div className="mt-8">
                                <h3 className="text-xl font-semibold mb-4">地圖位置</h3>
                                <div className="w-full h-64 rounded-lg overflow-hidden shadow">
                                    <iframe
                                        title="Google Map"
                                        src="https://www.google.com/maps?q=九龍尖沙咀東科學館道16號華懋廣場UG3樓&output=embed"
                                        width="100%"
                                        height="100%"
                                        style={{ border: 0 }}
                                        allowFullScreen=""
                                        loading="lazy"
                                        referrerPolicy="no-referrer-when-downgrade"
                                    ></iframe>
                                </div>
                                </div>

                                {/* HK零食回憶穿梭機按鈕 */}
                                <div className="mt-8 text-center">
                                    <button 
                                        className="hk-memories-button"
                                        onClick={() => navigate('hk-memories')}
                                    >
                                        <i className="fas fa-film mr-2"></i>
                                        HK零食回憶穿梭機
                                    </button>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            );
        };

                // 香港零食回憶時光區域頁
        const HongKongSnackMemoriesPage = () => {
            const { navigate } = useApp();
            const videoRef = useRef(null);
            const [isVideoLoaded, setIsVideoLoaded] = useState(false);
            const [isVideoPlaying, setIsVideoPlaying] = useState(false);
            const [videoError, setVideoError] = useState(null);
            
            useEffect(() => {
                // 當組件加載時，嘗試播放影片
                if (videoRef.current) {
                    const video = videoRef.current;
                    
                    // 設置影片事件監聽器
                    video.addEventListener('loadeddata', handleVideoLoaded);
                    video.addEventListener('error', handleVideoError);
                    video.addEventListener('play', () => setIsVideoPlaying(true));
                    video.addEventListener('pause', () => setIsVideoPlaying(false));
                    
                    // 嘗試自動播放
                    attemptAutoPlay();
                    
                    return () => {
                        video.removeEventListener('loadeddata', handleVideoLoaded);
                        video.removeEventListener('error', handleVideoError);
                        video.removeEventListener('play', () => setIsVideoPlaying(true));
                        video.removeEventListener('pause', () => setIsVideoPlaying(false));
                    };
                }
            }, []);
            
            const handleVideoLoaded = () => {
                setIsVideoLoaded(true);
                console.log('影片已加載');
            };
            
            const handleVideoError = (e) => {
                console.error('影片加載錯誤:', e);
                setVideoError('影片加載失敗，請檢查檔案路徑或格式');
            };
            
            const attemptAutoPlay = async () => {
                if (!videoRef.current) return;
                
                try {
                    // 確保影片是靜音的，這是自動播放的關鍵
                    videoRef.current.muted = true;
                    
                    // 嘗試播放
                    const playPromise = videoRef.current.play();
                    
                    if (playPromise !== undefined) {
                        await playPromise;
                        console.log('影片自動播放成功');
                        setIsVideoPlaying(true);
                    }
                } catch (error) {
                    console.warn('自動播放失敗:', error);
                    // 自動播放失敗，顯示控制按鈕讓用戶手動播放
                }
            };
            
            const togglePlay = () => {
                if (!videoRef.current) return;
                
                if (isVideoPlaying) {
                    videoRef.current.pause();
                } else {
                    videoRef.current.play().catch(error => {
                        console.error('手動播放失敗:', error);
                    });
                }
            };
            
            const toggleMute = () => {
                if (!videoRef.current) return;
                
                videoRef.current.muted = !videoRef.current.muted;
            };
            
            return (
                <div className="hk-memories-page animate-fade-in">
                    <h1 className="hk-memories-page-title">香港零食回憶時光區域</h1>
                    
                    <div className="wrapper">
                        <input type="checkbox" />
                        <div className="video">
                            <video 
                                ref={videoRef}
                                src="./Hong_Kong_Snack_Memories.mp4" 
                                loop 
                                muted 
                                autoPlay 
                                playsInline
                                preload="auto"
                            >
                                您的瀏覽器不支援影片播放。
                            </video>
                            
                            {/* 影片加載狀態指示器 */}
                            {!isVideoLoaded && !videoError && (
                                <div className="video-loading">
                                    <i className="fas fa-spinner fa-spin mr-2"></i>
                                    影片加載中...
                                </div>
                            )}
                            
                            {/* 影片錯誤訊息 */}
                            {videoError && (
                                <div className="video-loading" style={{color: 'red'}}>
                                    <i className="fas fa-exclamation-triangle mr-2"></i>
                                    {videoError}
                                </div>
                            )}
                        </div>
                        <div className="text">
                            <span data-text="香港零食回憶"></span>
                        </div>
                    </div>
                    
                    {/* 影片控制按鈕 */}
                    <div className="video-controls">
                        <button 
                            className="video-control-btn"
                            onClick={togglePlay}
                        >
                            <i className={`fas ${isVideoPlaying ? 'fa-pause' : 'fa-play'} mr-2`}></i>
                            {isVideoPlaying ? '暫停' : '播放'}
                        </button>
                        <button 
                            className="video-control-btn"
                            onClick={toggleMute}
                        >
                            <i className="fas fa-volume-mute mr-2"></i>
                            靜音/取消靜音
                        </button>
                    </div>
                    
                    <button 
                        className="back-button"
                        onClick={() => navigate('about')}
                    >
                        <i className="fas fa-arrow-left mr-2"></i>
                        返回關於我們
                    </button>
                </div>
            );
        };
        
        // 聯絡我們頁
        const ContactPage = () => {
            const { showToast } = useApp();
            const [formData, setFormData] = useState({
                name: '',
                email: '',
                subject: '',
                message: ''
            });
            const [submitting, setSubmitting] = useState(false);
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                setSubmitting(true);
                
                // 模擬提交
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                showToast('訊息已送出，我們會盡快回覆您', 'success');
                setFormData({ name: '', email: '', subject: '', message: '' });
                setSubmitting(false);
            };

            return (
                <div className="container mx-auto px-4 py-8 animate-fade-in">
                    <h1 className="text-3xl font-bold mb-8">聯絡我們</h1>
                    
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
                        <div>
                            <h2 className="text-2xl font-bold mb-6">聯絡資訊</h2>
                            <div className="space-y-6">
                                <div className="flex items-start">
                                    <i className="fas fa-phone text-primary text-xl mr-4 mt-1"></i>
                                    <div>
                                        <h3 className="font-semibold mb-1">客服專線</h3>
                                        <p className="text-gray-700">0800-123-456</p>
                                        <p className="text-sm text-gray-600">週一至週日 09:00-21:00</p>
                                    </div>
                                </div>
                                
                                <div className="flex items-start">
                                    <i className="fas fa-envelope text-primary text-xl mr-4 mt-1"></i>
                                    <div>
                                        <h3 className="font-semibold mb-1">Email</h3>
                                        <p className="text-gray-700">service@snackheaven.com</p>
                                        <p className="text-sm text-gray-600">24小時內回覆</p>
                                    </div>
                                </div>
                                
                                <div className="flex items-start">
                                    <i className="fas fa-map-marker-alt text-primary text-xl mr-4 mt-1"></i>
                                    <div>
                                        <h3 className="font-semibold mb-1">門市地址</h3>
                                        <p className="text-gray-700">九龍尖沙咀東科學館道16號華懋廣場UG3樓</p>
                                    </div>
                                </div>
                                
                                <div className="flex items-start">
                                    <i className="fas fa-clock text-primary text-xl mr-4 mt-1"></i>
                                    <div>
                                        <h3 className="font-semibold mb-1">營業時間</h3>
                                        <p className="text-gray-700">週一至週日 10:00-22:00</p>
                                    </div>
                                </div>
                            </div>

                            {/* Google Map 區塊 */}
                            <div className="mt-8">
                                <h3 className="text-xl font-semibold mb-4">地圖位置</h3>
                                <div className="w-full h-64 rounded-lg overflow-hidden shadow">
                                    <iframe
                                        title="Google Map"
                                        src="https://www.google.com/maps?q=九龍尖沙咀東科學館道16號華懋廣場UG3樓&output=embed"
                                        width="100%"
                                        height="100%"
                                        style={{ border: 0 }}
                                        allowFullScreen=""
                                        loading="lazy"
                                        referrerPolicy="no-referrer-when-downgrade"
                                    ></iframe>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h2 className="text-2xl font-bold mb-6">傳送訊息</h2>
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-gray-700 mb-2">姓名</label>
                                    <input 
                                        type="text"
                                        value={formData.name}
                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                        className="w-full px-4 py-2 border rounded-lg text-base"
                                        required
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-gray-700 mb-2">Email</label>
                                    <input 
                                        type="email"
                                        value={formData.email}
                                        onChange={(e) => setFormData({...formData, email: e.target.value})}
                                        className="w-full px-4 py-2 border rounded-lg text-base"
                                        required
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-gray-700 mb-2">主題</label>
                                    <input 
                                        type="text"
                                        value={formData.subject}
                                        onChange={(e) => setFormData({...formData, subject: e.target.value})}
                                        className="w-full px-4 py-2 border rounded-lg text-base"
                                        required
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-gray-700 mb-2">訊息</label>
                                    <textarea 
                                        value={formData.message}
                                        onChange={(e) => setFormData({...formData, message: e.target.value})}
                                        className="w-full px-4 py-2 border rounded-lg text-base"
                                        rows="5"
                                        required
                                    ></textarea>
                                </div>
                                
                                <button 
                                    type="submit"
                                    disabled={submitting}
                                    className="btn-primary bg-primary text-white px-8 py-3 rounded-lg font-semibold disabled:opacity-50"
                                >
                                    {submitting ? (
                                        <>
                                            <i className="fas fa-spinner fa-spin mr-2"></i>
                                            傳送中...
                                        </>
                                    ) : (
                                        '傳送訊息'
                                    )}
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            );
        };
        
        // 主應用組件
        const App = () => {
            const { currentPage, toast } = useApp();
            
            const renderPage = () => {
                switch (currentPage) {
                    case 'home':
                        return <HomePage />;
                    case 'products':
                        return <ProductsPage />;
                    case 'product-detail':
                        return <ProductDetailPage />;
                    case 'category':
                        return <CategoryPage />;
                    case 'cart':
                        return <CartPage />;
                    case 'checkout':
                        return <CheckoutPage />;
                    case 'order-confirm':
                        return <OrderConfirmPage />;
                    case 'login':
                        return <LoginPage />;
                    case 'profile':
                        return <ProfilePage />;
                    case 'orders':
                        return <OrdersPage />;
                    case 'order-detail':
                        return <OrderDetailPage />;
                    case 'favorites':
                        return <FavoritesPage />;
                    case 'search':
                        return <SearchPage />;
                    case 'promotions':
                        return <PromotionsPage />;
                    case 'about':
                        return <AboutPage />;
                    case 'contact':
                        return <ContactPage />;
                    case 'hk-memories':
                        return <HongKongSnackMemoriesPage />;
                    default:
                        return <HomePage />;
                }
            };
            
            return (
                <div className="min-h-screen bg-gray-50">
                    <Header />
                    <main>
                        {renderPage()}
                    </main>
                    <Footer />
                    {toast && <Toast message={toast.message} type={toast.type} />}
                </div>
            );
        };
        
        // 渲染應用
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <AppProvider>
                <App />
            </AppProvider>
        );
    </script>
</body>
</html>